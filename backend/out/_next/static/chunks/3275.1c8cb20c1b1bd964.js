(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3275],{922:(e,o,r)=>{"use strict";r.d(o,{NE:()=>n,dC:()=>t,oc:()=>s});let t=()=>{Promise.all([r.e(3309),r.e(6327),r.e(1588)]).then(r.bind(r,91588)).then(e=>{let{pdfjs:o}=e;o.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@4.8.69/build/pdf.worker.min.mjs",console.log("PDF.js worker initialized with custom version")}).catch(e=>{console.error("Failed to initialize PDF worker:",e)})},s=!0,i=e=>e?e instanceof Blob||e instanceof File||"string"==typeof e?e:e instanceof ArrayBuffer||e instanceof Uint8Array?new Blob([e],{type:"application/pdf"}):(console.error("Unknown PDF source type:",e),null):null,n=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if(!s)return{success:!1,error:"Cannot run on server"};try{let r=i(e);if(!r)return{success:!1,error:"Invalid PDF source"};if("string"==typeof r){let e=document.createElement("a");return e.href=r,e.download=o,e.target="_blank",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),{success:!0}}if(r instanceof Blob||r instanceof File){let e=URL.createObjectURL(r),t=document.createElement("a");return t.href=e,t.download=o,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(()=>URL.revokeObjectURL(e),100),{success:!0}}return{success:!1,error:"Unknown source type"}}catch(e){return console.error("Error creating downloadable PDF:",e),{success:!1,error:e.message||"Unknown error"}}};(()=>{let e=null;return async()=>e||(s?e="https://unpkg.com/pdfjs-dist@4.8.69/build/pdf.worker.min.mjs":null)})()},13275:(e,o,r)=>{"use strict";r.r(o),r.d(o,{default:()=>E});var t=r(95155),s=r(12115),i=r(29911),n=r(6874),a=r.n(n),c=r(35695),l=r(55028),d=r(15305),u=r(12515),h=r(17203);let m=async function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"newest",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;try{if(!e)throw Error("Book ID is required");let i=localStorage.getItem("token"),n=localStorage.getItem("apiKey"),a=new URLSearchParams;o&&"my-reviews"!==o?a.append("sort",o):"my-reviews"===o&&a.append("sort","newest"),r&&a.append("rating",r),a.append("page",t.toString()),a.append("limit",s.toString());let c="".concat(h.Sn.BOOKS.REVIEWS(e)).concat(a.toString()?"?"+a.toString():""),l=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json",...i&&{Authorization:"Bearer ".concat(i)},...n&&{"X-API-Key":n}}});if(!l.ok){let e=await l.json();throw Error(e.message||"Failed to fetch reviews")}return await l.json()}catch(e){throw console.error("Error fetching book reviews:",e),e}},g=async e=>{try{if(!e)throw Error("Book ID is required");let o=await fetch(h.Sn.BOOKS.RATING(e));if(!o.ok){let e=await o.json();throw Error(e.message||"Failed to fetch book rating")}return await o.json()}catch(e){throw console.error("Error fetching book rating:",e),e}},p=async function(e,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{if(!e)throw Error("Book ID is required");if(!o||o<1||o>5)throw Error("Rating must be between 1 and 5");if(r&&r.length>200)throw Error("Review text must be under 200 characters");let t=localStorage.getItem("token");if(!t)throw Error("You must be logged in to submit a review");let s=await fetch(h.Sn.BOOKS.REVIEWS(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({rating:o,comment:r.trim()})});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to submit review")}return await s.json()}catch(e){throw console.error("Error submitting book review:",e),e}},w=async e=>{try{let o=localStorage.getItem("token");if(!o)throw Error("You must be logged in to delete a review");let r=await fetch("".concat(h.JR,"/reviews/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to delete review")}return await r.json()}catch(e){throw console.error("Error deleting review:",e),e}};var v=r(56068),b=r(32695),_=r.n(b);function k(e){let{bookId:o}=e,[r,n]=(0,s.useState)([]),[a,c]=(0,s.useState)(0),[l,h]=(0,s.useState)(""),[b,k]=(0,s.useState)(0),[f,x]=(0,s.useState)(0),[j,y]=(0,s.useState)(0),[B,S]=(0,s.useState)(!0),[R,N]=(0,s.useState)(null),[P,E]=(0,s.useState)(null),[C,I]=(0,s.useState)(!1),[D,F]=(0,s.useState)(!1),[A,T]=(0,s.useState)(!1),[O,L]=(0,s.useState)(!1),[U,H]=(0,s.useState)(0),[Y,z]=(0,s.useState)(!1),[G,M]=(0,s.useState)(null),[K,V]=(0,s.useState)("newest"),[q,W]=(0,s.useState)(null),[J,Z]=(0,s.useState)({}),[$,X]=(0,s.useState)(1),[Q,ee]=(0,s.useState)({page:1,limit:4,totalReviews:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),[eo,er]=(0,s.useState)(!1),[et,es]=(0,s.useState)(null),{user:ei}=(0,v.h)();(0,s.useEffect)(()=>{en()},[o,K,q,$]);let en=async()=>{try{if(!o){N("Book ID is missing. Cannot load reviews."),S(!1);return}console.log("BookReview: Fetching data for bookId:",o),S(!0);let[e,r]=await Promise.all([m(o,K,q,$,4),g(o)]),t=e.reviews||[];if("my-reviews"===K&&ei&&(t=t.filter(e=>ei.name&&e.userName===ei.name||ei.username&&e.userName===ei.username)),n(t),x(r.averageRating),y(r.reviewCount),Z(r.ratingDistribution||{}),ei){let e=t.some(e=>ei.name&&e.userName===ei.name||ei.username&&e.userName===ei.username);if(er(e),e){let e=t.find(e=>ei.name&&e.userName===ei.name||ei.username&&e.userName===ei.username);es(e)}}e.pagination&&ee(e.pagination),N(null)}catch(e){N("Failed to load reviews. Please try again later."),console.error("Error loading review data:",e)}finally{S(!1)}},ea=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),ec=e=>{V(e),X(1)},el=e=>{q===e?W(null):W(e),X(1)},ed=e=>{e>=1&&e<=Q.totalPages&&X(e)},eu=async e=>{if(e.preventDefault(),!o)return void E("Book ID is missing. Cannot submit review.");if(0===a)return void E("Please select a rating");try{I(!0),E(null),console.log("Submitting review for bookId:",o),await p(o,a,l),X(1),en(),c(0),h(""),H(0),T(!0),setTimeout(()=>{T(!1)},3e3)}catch(e){E(e.message||"Failed to submit review. Please try again later.")}finally{I(!1)}},eh=e=>{M(e),z(!0)},em=()=>{M(null),z(!1)},eg=async()=>{if(G)try{F(!0),console.log("Deleting review with ID:",G._id),await w(G._id),en(),L(!0),setTimeout(()=>{L(!1)},3e3)}catch(e){console.error("Error deleting review:",e),E(e.message||"Failed to delete review. Please try again later.")}finally{F(!1),z(!1),M(null)}},ep=e=>ei&&(ei.name&&e.userName===ei.name||ei.username&&e.userName===ei.username),ew=e=>Array.from({length:5},(e,o)=>o+1).map(o=>(0,t.jsx)("span",{className:_().displayStar,children:e>=o?(0,t.jsx)(i.gt3,{}):(0,t.jsx)(i.wei,{})},o));return B?(0,t.jsx)("div",{className:_().loading,children:"Loading reviews..."}):R?(0,t.jsx)("div",{className:_().error,children:R}):(0,t.jsxs)("div",{className:_().reviewContainer,children:[Y&&G&&(0,t.jsx)("div",{className:_().confirmOverlay,children:(0,t.jsxs)("div",{className:_().confirmDialog,children:[(0,t.jsxs)("div",{className:_().confirmHeader,children:[(0,t.jsx)("h4",{children:"Delete Review"}),(0,t.jsx)("button",{onClick:em,className:_().closeButton,"aria-label":"Close",children:(0,t.jsx)(i.QCr,{})})]}),(0,t.jsx)("p",{children:"Are you sure you want to delete your review? This action cannot be undone."}),(0,t.jsxs)("div",{className:_().confirmButtons,children:[(0,t.jsx)("button",{onClick:em,className:_().cancelButton,disabled:D,children:"Cancel"}),(0,t.jsx)("button",{onClick:eg,className:_().deleteConfirmButton,disabled:D,children:D?"Deleting...":"Delete"})]})]})}),(0,t.jsx)("div",{className:_().reviewHeader,children:(0,t.jsxs)("div",{className:_().reviewSummary,children:[(0,t.jsxs)("h2",{children:[j," Reviews"]}),(0,t.jsxs)("div",{className:_().totalRating,children:[(0,t.jsxs)("div",{className:_().overallRating,children:[(0,t.jsx)("div",{className:_().ratingValue,children:f.toFixed(1)}),(0,t.jsx)("div",{className:_().ratingStars,children:ew(f)})]}),(0,t.jsx)("div",{className:_().totalBadge,children:(0,t.jsxs)("span",{children:[j," ratings"]})})]})]})}),(0,t.jsxs)("div",{className:_().reviewContent,children:[ei?eo?(0,t.jsxs)("div",{className:_().alreadyReviewed,children:[(0,t.jsx)("h3",{children:"Your Review"}),(0,t.jsxs)("div",{className:_().userReviewBox,children:[(0,t.jsxs)("div",{className:_().userReviewHeader,children:[(0,t.jsxs)("div",{className:_().userReviewRating,children:[ew((null==et?void 0:et.rating)||0),(0,t.jsxs)("span",{className:_().ratingText,children:[(null==et?void 0:et.rating)||0,"/5 stars"]})]}),(0,t.jsxs)("button",{onClick:()=>eh(et),className:_().deleteUserReviewButton,title:"Delete your review",children:[(0,t.jsx)(i.qbC,{})," Delete Review"]})]}),(null==et?void 0:et.comment)&&(0,t.jsxs)("div",{className:_().userReviewComment,children:['"',et.comment,'"']}),(0,t.jsxs)("div",{className:_().userReviewDate,children:["Reviewed on ",ea(null==et?void 0:et.createdAt)]})]})]}):(0,t.jsxs)("div",{className:_().reviewForm,children:[(0,t.jsx)("h3",{children:"Write a Review"}),A&&(0,t.jsxs)("div",{className:_().success,children:[(0,t.jsx)(i.A7C,{style:{marginRight:"8px"}}),"Your review has been submitted successfully!"]}),O&&(0,t.jsxs)("div",{className:_().success,children:[(0,t.jsx)(i.A7C,{style:{marginRight:"8px"}}),"Your review has been deleted successfully!"]}),P&&(0,t.jsxs)("div",{className:_().submitError,children:[(0,t.jsx)(i.BS8,{style:{marginRight:"8px"}}),P]}),(0,t.jsxs)("form",{onSubmit:eu,children:[(0,t.jsxs)("div",{className:_().ratingSelector,children:[(0,t.jsx)("label",{htmlFor:"rating-stars",children:"Your Rating:"}),(0,t.jsx)("div",{className:_().stars,id:"rating-stars",role:"group","aria-label":"Select a rating from 1 to 5 stars",children:Array.from({length:5},(e,o)=>o+1).map(e=>(0,t.jsx)("span",{className:_().ratingStar,onClick:()=>c(e),onMouseEnter:()=>k(e),onMouseLeave:()=>k(0),children:(b||a)>=e?(0,t.jsx)(i.gt3,{}):(0,t.jsx)(i.wei,{})},e))}),a>0&&(0,t.jsxs)("div",{className:_().selectedRating,children:["You selected: ",(0,t.jsxs)("strong",{children:[a," ",1===a?"star":"stars"]})]})]}),(0,t.jsxs)("div",{className:_().commentField,children:[(0,t.jsxs)("label",{htmlFor:"review-comment",children:["Your Review: ",(0,t.jsx)("span",{className:_().optional,children:"(optional, max 200 characters)"})]}),(0,t.jsx)("textarea",{id:"review-comment",value:l,onChange:e=>{let o=e.target.value;o.length<=200&&(h(o),H(o.length))},placeholder:"Share your thoughts about this book (optional)",rows:4,className:_().textarea,maxLength:200}),(0,t.jsxs)("div",{className:_().characterCount,children:[U,"/200 characters"]})]}),(0,t.jsx)("button",{type:"submit",className:_().submitButton,disabled:C||0===a,children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:_().spinner}),"Submitting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Cer,{style:{marginRight:"8px"}}),"Submit Review"]})})]})]}):(0,t.jsxs)("div",{className:_().loginPrompt,children:[(0,t.jsx)(i.JhU,{style:{marginRight:"8px",fontSize:"1.2rem"}}),"Please log in to leave a review."]}),(0,t.jsxs)("div",{className:_().reviewsList,children:[(0,t.jsx)("div",{className:_().reviewsHeader,children:(0,t.jsxs)("h3",{children:["Reviews (",j,")"]})}),(0,t.jsx)("div",{className:_().filterSortContainer,children:(0,t.jsxs)("div",{className:_().ratingFilters,children:[(0,t.jsx)("div",{className:_().filtersHeader,children:(0,t.jsxs)("h3",{children:[(0,t.jsx)(u.npS,{style:{color:"#ef4444"}})," ",(0,t.jsx)("span",{children:"Filter & Sort Reviews"})]})}),(q||"newest"!==K)&&(0,t.jsxs)("div",{className:_().activeFilterIndicator,children:[q&&(0,t.jsxs)("div",{className:_().filterBadge,children:[(0,t.jsxs)("div",{className:_().filterBadgeContent,children:[(0,t.jsxs)("strong",{children:[q,"-star"]})," reviews only"]}),(0,t.jsx)("button",{className:_().clearFilterButton,onClick:()=>el(null),"aria-label":"Clear rating filter",title:"Clear rating filter",children:(0,t.jsx)(i.QCr,{})})]}),"newest"!==K&&(0,t.jsx)("div",{className:_().sortBadge,children:(0,t.jsxs)("span",{children:["Sorted by: ",(0,t.jsx)("strong",{children:"highest"===K?"Highest Rated":"lowest"===K?"Lowest Rated":"oldest"===K?"Oldest First":"my-reviews"===K?"My Reviews":"Newest First"})]})})]}),(0,t.jsxs)("div",{className:_().filterOptions,children:[(0,t.jsx)("div",{className:_().filterLabel,children:"Filter by Rating:"}),(0,t.jsxs)("div",{className:_().ratingFilterButtons,children:[(0,t.jsx)("button",{className:"".concat(_().ratingFilterButton," ").concat(null===q?_().activeFilter:""),onClick:()=>el(null),"aria-label":"Show all reviews",title:"Show all reviews",children:"All Ratings"}),[5,4,3,2,1].map(e=>(0,t.jsxs)("button",{className:"".concat(_().ratingFilterButton," ").concat(q===e?_().activeFilter:""),onClick:()=>el(e),"aria-label":"Show only ".concat(e," star reviews"),title:"Show only ".concat(e," star reviews"),children:[(0,t.jsxs)("span",{className:_().filterStars,children:[e," ",(0,t.jsx)(i.gt3,{className:_().filterStar})]}),J&&J[e]>0&&(0,t.jsxs)("span",{className:_().filterCount,children:["(",J[e],")"]})]},e))]})]}),(0,t.jsxs)("div",{className:_().sortOptions,children:[(0,t.jsx)("div",{className:_().filterLabel,children:"Sort Reviews By:"}),(0,t.jsxs)("div",{className:_().sortButtons,children:[(0,t.jsxs)("button",{className:"".concat(_().sortButton," ").concat("newest"===K?_().activeSort:""),onClick:()=>ec("newest"),"aria-label":"Sort by newest reviews first",title:"Sort by newest reviews first",children:[(0,t.jsx)(u.SEk,{})," Newest First"]}),(0,t.jsxs)("button",{className:"".concat(_().sortButton," ").concat("oldest"===K?_().activeSort:""),onClick:()=>ec("oldest"),"aria-label":"Sort by oldest reviews first",title:"Sort by oldest reviews first",children:[(0,t.jsx)(d.NXG,{})," Oldest First"]}),(0,t.jsxs)("button",{className:"".concat(_().sortButton," ").concat("highest"===K?_().activeSort:""),onClick:()=>ec("highest"),"aria-label":"Sort by highest rating first",title:"Sort by highest rating first",children:[(0,t.jsx)(d.sIf,{})," Highest Rated"]}),(0,t.jsxs)("button",{className:"".concat(_().sortButton," ").concat("lowest"===K?_().activeSort:""),onClick:()=>ec("lowest"),"aria-label":"Sort by lowest rating first",title:"Sort by lowest rating first",children:[(0,t.jsx)(d.NXG,{})," Lowest Rated"]}),ei&&(0,t.jsxs)("button",{className:"".concat(_().sortButton," ").concat("my-reviews"===K?_().activeSort:""),onClick:()=>ec("my-reviews"),"aria-label":"Show only my reviews",title:"Show only my reviews",children:[(0,t.jsx)(i.x$1,{})," My Reviews"]})]})]})]})}),0===r.length?(0,t.jsx)("div",{className:_().noReviews,children:q?"No ".concat(q,"-star reviews found. ").concat(j>0?"Try a different filter.":"This book has no reviews yet."):"my-reviews"===K?"You have not reviewed this book yet.":j>0?"No reviews match the current filters.":"Be the first to review this book!"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:_().activeFilterIndicator,children:[(0,t.jsx)("div",{className:_().reviewCount,children:(0,t.jsx)("span",{children:"my-reviews"===K?"Showing your ".concat(r.length," ").concat(1===r.length?"review":"reviews"):(0,t.jsxs)(t.Fragment,{children:["Showing ",(0,t.jsx)("strong",{children:r.length})," of ",(0,t.jsx)("strong",{children:j})," reviews"]})})}),r.map(e=>(0,t.jsxs)("div",{className:_().reviewItem,children:[(0,t.jsxs)("div",{className:_().reviewHeader,children:[(0,t.jsxs)("div",{className:_().reviewerInfo,children:[e.userImage?(0,t.jsx)("img",{src:e.userImage,alt:e.userName,className:_().reviewerImage}):(0,t.jsx)("div",{className:_().reviewerPlaceholder,children:(0,t.jsx)(i.x$1,{})}),(0,t.jsx)("span",{className:_().reviewerName,children:e.userName})]}),(0,t.jsxs)("div",{className:_().reviewMetadata,children:[(0,t.jsxs)("div",{className:_().reviewDate,children:[(0,t.jsx)(i.bfZ,{}),(0,t.jsx)("span",{children:ea(e.createdAt)})]}),ep(e)&&(0,t.jsx)("button",{onClick:()=>eh(e),className:_().deleteButton,disabled:D,title:"Delete your review",children:(0,t.jsx)(i.qbC,{})})]})]}),(0,t.jsx)("div",{className:_().reviewRating,children:ew(e.rating)}),e.comment&&(0,t.jsx)("div",{className:_().reviewText,children:e.comment})]},e._id))]}),Q.totalPages<=1?null:(0,t.jsxs)("div",{className:_().pagination,children:[(0,t.jsx)("button",{className:"".concat(_().pageButton," ").concat(Q.hasPrevPage?"":_().disabled),onClick:()=>ed($-1),disabled:!Q.hasPrevPage,"aria-label":"Previous page",children:(0,t.jsx)(i._Jj,{})}),(0,t.jsxs)("div",{className:_().pageInfo,children:["Page ",Q.page," of ",Q.totalPages]}),(0,t.jsx)("button",{className:"".concat(_().pageButton," ").concat(Q.hasNextPage?"":_().disabled),onClick:()=>ed($+1),disabled:!Q.hasNextPage,"aria-label":"Next page",children:(0,t.jsx)(i.X6T,{})})]})]})]})]})]})}var f=r(71759),x=r.n(f),j=r(922),y=r(53116),B=r(46264),S=r(38543);r(72047);let R=(0,l.default)(()=>Promise.all([r.e(5129),r.e(510)]).then(r.bind(r,510)),{loadableGenerated:{webpack:()=>[510]},ssr:!1,loading:()=>(0,t.jsxs)("div",{className:x().loadingContainer,children:[(0,t.jsx)("div",{className:x().loadingSpinner}),(0,t.jsx)("p",{children:"Loading PDF viewer..."})]})}),N={},P=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e5,r=Date.now(),t=N[e]||0;return r-t<o?(console.log("Skipping ".concat(e," API call, last call was ").concat((r-t)/1e3,"s ago (min interval: ").concat(o/1e3,"s)")),!1):(N[e]=r,!0)};function E(e){let{id:o}=e,[n,l]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0),[m,g]=(0,s.useState)(null),[p,w]=(0,s.useState)(!1),[b,_]=(0,s.useState)(!1),[f,N]=(0,s.useState)(!1),[E,C]=(0,s.useState)(null),[I,D]=(0,s.useState)(!1),[F,A]=(0,s.useState)(null),[T,O]=(0,s.useState)(!1),[L,U]=(0,s.useState)(!1),[H,Y]=(0,s.useState)(null),[z,G]=(0,s.useState)(!1),[M,K]=(0,s.useState)(!1),[V,q]=(0,s.useState)(!1),[W,J]=(0,s.useState)(!1),[Z,$]=(0,s.useState)(!1),X=(0,c.useRouter)(),{user:Q,isLoggedIn:ee,getToken:eo,getApiKey:er,updateUserCoins:et}=(0,v.h)(),es=(0,s.useRef)(!1),ei=(0,s.useRef)(!1),en=(0,s.useRef)(0),ea=(0,s.useRef)(null);(0,s.useEffect)(()=>{{new URLSearchParams(window.location.search).has("debug")&&(K(!0),console.log("DEBUG MODE ENABLED VIA URL"));let e=[],o=[17,16,80,17,16,80],r=r=>{e.push(r.keyCode),e.length>o.length&&e.shift(),e.join("")===o.join("")&&(K(e=>!e),console.log("DEBUG MODE TOGGLED VIA KEY SEQUENCE"),e=[])};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}}},[]);let ec=!!n&&(!0===n.isPremium||"true"===n.isPremium||1===n.isPremium||"true"===String(n.isPremium).toLowerCase()||n.price&&Number(n.price)>0),el=!!n&&(!0===n.userHasAccess||"true"===n.userHasAccess||1===n.userHasAccess||"true"===String(n.userHasAccess).toLowerCase()),ed=V||el||W,eu=!!Q&&!!n&&Number(Q.coins||0)>=Number(n.price||0),eh=n?n.price?Number(n.price):25*!!ec:0,em=(0,s.useCallback)(async()=>{if(!o)return void console.log("Cannot check purchase status: Book ID is missing");if(!ec)return void console.log("Skipping purchase check for non-premium book");if(!ee)return void console.log("Skipping purchase check - user not logged in");if(W)return void console.log("User already has access through subscription, skipping purchase check");if(ei.current)return void console.log("Already fetching data, skipping duplicate purchase check");if(P("checkPurchase_"+o,3e5)){try{let e=localStorage.getItem("purchaseCheckData_"+o);if(e){let o=JSON.parse(e),r=new Date(o.timestamp),t=new Date,s=new Date(t.getTime()-3e5);if(r>s&&(console.log("Using cached purchase data from",r),o.hasPurchased)){console.log("Cached data indicates user has purchased this book"),q(!0),U(!0),l(e=>({...e,userHasAccess:!0}));return}}}catch(e){console.error("Error checking cached purchase data:",e)}console.log("Checking purchase status for book ID: ".concat(o));try{if(ei.current=!0,n&&!0===n.userHasAccess){console.log("Book already marked as purchased in local state"),U(!0);return}console.log("Calling API to verify purchase status...");let e=await (0,y.PZ)(o);try{localStorage.setItem("purchaseCheckData_"+o,JSON.stringify({hasPurchased:(null==e?void 0:e.success)&&(null==e?void 0:e.hasPurchased)===!0,timestamp:new Date().toISOString()}))}catch(e){console.error("Error caching purchase data:",e)}if(console.log("Purchase check API response:",e),e&&e.success){let o=e.hasPurchased;console.log("API confirms user ".concat(o?"has":"has not"," purchased this book")),l(e=>({...e,userHasAccess:o})),o?(q(!0),U(!0),ea.current&&(console.log("Book purchased, disabling subscription checks"),clearInterval(ea.current),ea.current=null,$(!1))):q(!1)}else console.warn("Purchase check API returned success:false or invalid response")}catch(e){console.error("Error checking book purchase status:",e);try{let e=localStorage.getItem("userInfo");if(e){let r=JSON.parse(e);if(r.purchasedBooks&&Array.isArray(r.purchasedBooks)){let e=r.purchasedBooks.includes(o);console.log("Fallback: Local storage indicates user ".concat(e?"has":"has not"," purchased this book")),e&&(q(!0),U(!0),l(e=>({...e,userHasAccess:!0})),ea.current&&(console.log("Book purchased (local storage), disabling subscription checks"),clearInterval(ea.current),ea.current=null,$(!1)))}}}catch(e){console.error("Error checking local storage for purchase status:",e)}}finally{ei.current=!1}}},[ee,o,ec,n,W,U,q,l]),eg=(0,s.useCallback)(async()=>{if(ee&&ec){if(V||el)return void console.log("User already has access through purchase, skipping subscription check");if(ei.current)return void console.log("Already fetching data, skipping duplicate subscription check");if(console.log("Subscription check starting for premium book"),P("checkSubscription",6e4)){try{let e=localStorage.getItem("subscriptionCheckData");if(e)try{let o=JSON.parse(e),r=new Date(o.timestamp),t=new Date,s=new Date(t.getTime()-12e4);if(r>s){if(console.log("Using cached subscription data from",r),o.hasSubscription){console.log("Cached data indicates user has active subscription"),J(!0),l(e=>({...e,userHasAccess:!0})),ea.current&&(clearInterval(ea.current),ea.current=null,$(!1));return}console.log("Cached data indicates user has no subscription")}else console.log("Cached subscription data is stale, checking again")}catch(e){console.error("Error parsing cached subscription data:",e)}}catch(e){console.error("Error checking cached subscription data:",e)}try{var e,o,r,t,s;if(console.log("Checking subscription status from API..."),ei.current=!0,!localStorage.getItem("token")){console.error("No authentication token found for subscription check"),J(!1),ei.current=!1;return}let i=await (0,B.zN)(!0);console.log("Subscription check result:",i);let n=!!(i&&!0===i.hasSubscription&&i.subscription&&"active"===i.subscription.status&&new Date(i.subscription.endDate)>new Date);try{localStorage.setItem("subscriptionCheckData",JSON.stringify({hasSubscription:n,timestamp:new Date().toISOString(),details:{planName:(null==i||null==(o=i.subscription)||null==(e=o.plan)?void 0:e.name)||"Unknown",endDate:(null==i||null==(r=i.subscription)?void 0:r.endDate)||null,status:(null==i||null==(t=i.subscription)?void 0:t.status)||"unknown"}}))}catch(e){console.error("Error caching subscription data:",e)}n?(console.log("User has active subscription, granting access to premium book"),console.log("Subscription details:",{plan:null==(s=i.subscription.plan)?void 0:s.name,endDate:i.subscription.endDate,status:i.subscription.status}),J(!0),l(e=>({...e,userHasAccess:!0})),ea.current&&(console.log("Subscription found, disabling periodic checks"),clearInterval(ea.current),ea.current=null,$(!1))):(console.log("User does not have an active subscription"),J(!1),l(e=>({...e,userHasAccess:V||el})))}catch(e){console.error("Error checking subscription status:",e),J(!1);try{let e=localStorage.getItem("userInfo");if(e){let o=JSON.parse(e);!0===o.isSubscribed&&!0===o.isPremium&&(console.log("Fallback: User info in localStorage indicates active subscription"),J(!0),l(e=>({...e,userHasAccess:!0})))}}catch(e){console.error("Error checking fallback subscription data:",e)}}finally{ei.current=!1}}}},[ee,ec,V,el,l]);(0,s.useEffect)(()=>{if(ee&&ec&&!Z){if(V||el)return void console.log("User already has access through purchase, not setting up subscription checker");console.log("Starting subscription checker...");let e=!1;try{let o=localStorage.getItem("subscriptionCheckData");if(o){let r=JSON.parse(o),t=new Date(r.timestamp),s=new Date,i=new Date(s.getTime()-3e5);t>i&&(console.log("Using cached subscription data for initial check"),e=!0,r.hasSubscription&&(J(!0),l(e=>({...e,userHasAccess:!0}))))}}catch(e){console.error("Error checking cached subscription data:",e)}e||eg(),$(!0)}return()=>{ea.current&&(console.log("Clearing subscription checker..."),clearInterval(ea.current),ea.current=null,$(!1))}},[ee,ec,eg,Z,V,el]),(0,s.useEffect)(()=>{ee&&o&&ec&&em()},[ee,o,ec,em]);let ep=(0,s.useCallback)(async e=>{if(e){if(console.log("Fetching book details for book ID ".concat(e)),!P("fetchBook_"+e,3e4))return void setTimeout(()=>{em(),eg()},100);try{u(!0),g(null);let o=ee?await eo():null,r={};o&&(r.Authorization="Bearer ".concat(o));let t=await fetch("".concat("https://ebookaura.onrender.com/api","/books/").concat(e),{headers:r});if(!t.ok)throw Error("Failed to fetch book: ".concat(t.status," ").concat(t.statusText));let s=await t.json();console.log("Book data received:",s);let i=function(e){if(!e||"object"!=typeof e)return e;let o={...e};return o._id&&"object"==typeof o._id&&o._id.$oid&&(o._id=o._id.$oid),"isPremium"in o&&(o.isPremium=!0===o.isPremium||"true"===o.isPremium||1===o.isPremium||"true"===String(o.isPremium).toLowerCase()),"price"in o&&(o.price&&"object"==typeof o.price?o.price.$numberLong?o.price=Number(o.price.$numberLong):o.price.$numberInt&&(o.price=Number(o.price.$numberInt)):o.price=Number(o.price||0)),["createdAt","updatedAt","lastSignInDate","lastCoinReward"].forEach(e=>{o[e]&&("object"==typeof o[e]&&o[e].$date?"object"==typeof o[e].$date&&o[e].$date.$numberLong?o[e]=new Date(Number(o[e].$date.$numberLong)):o[e]=new Date(o[e].$date):"string"==typeof o[e]&&(o[e]=new Date(o[e])))}),["views","downloads","averageRating","pageSize","fileSizeMB","coins"].forEach(e=>{e in o&&("object"==typeof o[e]?o[e].$numberInt?o[e]=Number(o[e].$numberInt):o[e].$numberLong&&(o[e]=Number(o[e].$numberLong)):o[e]=Number(o[e]||0))}),"userHasAccess"in o&&(o.userHasAccess=!0===o.userHasAccess||"true"===o.userHasAccess||1===o.userHasAccess||"true"===String(o.userHasAccess).toLowerCase()),o}(s);l(i);let n=i.isPremium||i.price&&i.price>0;if(i.userHasAccess,ee&&n){console.log("Book is premium and user is logged in, checking access rights");let e=!1;if(!0===i.userHasAccess&&(console.log("API response indicates user already has access"),q(!0),U(!0),e=!0),!e)try{await em(),(V||el)&&(console.log("Purchase check confirmed access"),e=!0)}catch(e){console.error("Error in purchase check:",e)}if(!e)try{console.log("Checking subscription status for premium content"),await eg(),W&&(console.log("Subscription check confirmed access"),e=!0)}catch(e){console.error("Error in subscription check:",e)}e&&(console.log("Access verified through any method, updating book state"),l(e=>({...e,userHasAccess:!0})))}}catch(e){console.error("Error fetching book details:",e),g("Failed to load book details. Please try again later.")}finally{u(!1)}}},[ee,eo,em,eg,V,el]),ew=async()=>{if(!n||!o)return void console.error("Cannot view PDF: Book data or ID is missing");try{_(!0),console.log("Fetching PDF content for viewing, book ID:",o);let e={"Content-Type":"application/json"};if(n.isPremium){let o=eo(),r=er();o&&(e.Authorization="Bearer ".concat(o)),r&&(e["X-API-Key"]=r)}let r="".concat(h.Sn.BOOKS.PDF_CONTENT(o),"?counted=true"),t=await fetch(r,{headers:e});if(!t.ok){if(401===t.status&&(await t.json()).isPremium)throw A("This is premium content. Please log in to access it."),Error("Premium content requires authentication");throw Error("Failed to fetch PDF: ".concat(t.status," ").concat(t.statusText))}let s=await t.blob();C(s),N(!0)}catch(e){if(console.error("Error fetching PDF for viewing:",e),F)return void(ee?alert("You do not have access to this premium content."):(alert("This is premium content. Please log in to access it."),X.push("/login")));try{if(n.pdfUrl){let e=n.pdfUrl.endsWith(".pdf")?n.pdfUrl:"".concat(n.pdfUrl,".pdf");console.log("Fallback: Using direct PDF URL: ".concat(e)),C(e),N(!0)}else throw Error("No PDF URL available for viewing")}catch(e){console.error("Fallback also failed:",e),alert("Failed to load PDF for viewing. Please try downloading instead.")}}finally{_(!1)}},ev=async()=>{if(ec&&!ee){A("This is premium content. Please log in to access it."),X.push("/login");return}if(ec&&ee&&!ed&&!L)return void A("You need to purchase this book to access it.");ew()},eb=async()=>{if(!n||!o)return void console.error("Cannot download: Book data or ID is missing");if(ec&&!ee){A("This is premium content. Please log in to access it."),X.push("/login");return}if(ec&&ee&&!ed&&!L)return void A("You need to purchase this book to download it.");try{w(!0),console.log("Downloading book with ID:",o);let e={"Content-Type":"application/json"};if(n.isPremium){let o=eo(),r=er();o&&(e.Authorization="Bearer ".concat(o)),r&&(e["X-API-Key"]=r)}try{await fetch(h.Sn.BOOKS.DOWNLOAD(o),{method:"POST",headers:e})}catch(e){console.warn("Failed to record download count, but continuing download:",e)}let r="".concat(n.title.replace(/[^a-zA-Z0-9]/g,"_"),".pdf");try{console.log("Fetching PDF content via backend proxy for book: ".concat(n.title));let t="".concat(h.Sn.BOOKS.PDF_CONTENT(o),"?download=true&counted=true"),s=await fetch(t,{headers:e});if(!s.ok){if(401===s.status&&(await s.json()).isPremium)throw A("This is premium content. Please log in to access it."),Error("Premium content requires authentication");throw Error("Failed to fetch PDF: ".concat(s.status," ").concat(s.statusText))}let i=await s.blob(),a=(0,j.NE)(i,r);if(!a.success)throw Error(a.error||"Download failed");console.log("PDF downloaded as: ".concat(r))}catch(r){console.warn("Direct download failed, using fallback:",r);let e="".concat(h.Sn.BOOKS.PDF(o),"?download=true&counted=true");window.open(e,"_blank")}l(e=>({...e,downloads:(e.downloads||0)+1}))}catch(e){console.error("Error downloading book:",e)}finally{w(!1)}},e_=async()=>{try{G(!1),O(!0),Y(null),console.log("Initiating book purchase for ID: ".concat(o));let e=await (0,y.vW)(o);if(e&&e.success)console.log("Purchase successful:",e),Q&&void 0!==e.coins&&(console.log("Updating user coins from ".concat(Q.coins," to ").concat(e.coins)),et(e.coins)),await em(),U(!0),S.oR.success(e.message||"Book purchased successfully!");else if(e&&e.message)e.message.includes("already purchased")||e.message.includes("already own")?(console.log("Book was already purchased"),U(!0),S.oR.info("You already own this book"),await em()):(S.oR.success(e.message),U(!0));else{console.warn("Purchase returned success but without details"),S.oR.success("Book purchase successful!");try{U(!0),await em()}catch(e){console.error("Error refreshing purchase status:",e)}}}catch(e){console.error("Purchase error:",e),e.message?(Y(e.message),S.oR.error(e.message)):(Y("An unknown error occurred during purchase"),S.oR.error("Failed to purchase book. Please try again later."))}finally{O(!1)}},ek=(0,s.useCallback)(()=>{if(!n)return;K(!0),console.log("======= PREMIUM STATUS DEBUG ======="),console.log("Raw values:"),console.log("- isPremium = ".concat(String(n.isPremium)," (").concat(typeof n.isPremium,")")),console.log("- price = ".concat(String(n.price)," (").concat(typeof n.price,")")),console.log("- Current computed isPremiumBook: ".concat(ec)),console.log("- Has user purchased: ".concat(ed)),console.log("- Has subscription: ".concat(W));let e=!1,r=0;(!0===n.isPremium||"true"===n.isPremium||1===n.isPremium||"true"===String(n.isPremium).toLowerCase())&&(e=!0),n.price&&(r="number"==typeof n.price?n.price:"string"==typeof n.price?parseFloat(n.price.replace(/[^0-9.-]+/g,"")):"object"==typeof n.price&&n.price.$numberLong?Number(n.price.$numberLong):Number(n.price));let t=e;!t&&r>0&&(t=!0),t&&r<=0&&(r=25),console.log("\nFixed values:"),console.log("- fixedIsPremium = ".concat(e)),console.log("- fixedPrice = ".concat(r)),console.log("- shouldBePremium = ".concat(t)),l(e=>({...e,isPremium:t,price:r})),console.log("\nBook state updated with fixed values."),console.log("=================================="),S.oR.success("Premium status check complete"),setTimeout(()=>{try{ep(o),console.log("Refreshed book data from server")}catch(e){console.error("Error refreshing book data:",e)}},1e3)},[n,ec,ed,W,o,ep]);(0,s.useEffect)(()=>{n&&console.log("Premium detection debug:",{rawIsPremium:n.isPremium,isPremiumType:typeof n.isPremium,rawPrice:n.price,priceType:typeof n.price,computedIsPremium:ec})},[n,ec]);let ef=(0,s.useCallback)(async()=>{if(!ee||!Q)return void console.log("Cannot refresh coins: User not logged in");let e=Date.now(),o=e-en.current;if(o<5e3)return void console.log("Skipping coin refresh - last refresh was ".concat(o,"ms ago (< 5000ms)"));en.current=e,console.log("Refreshing user coin balance...");try{let{getUserCoins:e}=await Promise.resolve().then(r.bind(r,53116)),o=await e();o&&"number"==typeof o.coins&&(console.log("Updating user coins from ".concat(Q.coins," to ").concat(o.coins)),et(o.coins))}catch(e){console.error("Error refreshing coin balance:",e)}},[ee,Q,et]);return((0,s.useEffect)(()=>{ee&&ec&&(console.log("Component mounted or premium status changed - refreshing coin balance"),ef())},[ee,ec,ef]),(0,s.useEffect)(()=>{if(!o){console.error("BookPageClient: Book ID is missing or undefined"),g("Book ID is missing. Please go back and try again."),u(!1);return}let e=!0;!1===d&&(e=ee&&!es.current||!n,ee&&!es.current&&(console.log("User just logged in - refreshing coin balance"),ef())),es.current=ee,e&&setTimeout(()=>ep(o),50)},[o,ee,Q,ef]),(0,s.useEffect)(()=>()=>{E&&"string"==typeof E&&E.startsWith("blob:")&&URL.revokeObjectURL(E)},[E]),(0,s.useEffect)(()=>{if(ee&&ec){console.log("Component mounted - checking cached data and auth state");try{let e=localStorage.getItem("subscriptionCheckData");if(e)try{let o=JSON.parse(e),r=new Date(o.timestamp),t=new Date,s=new Date(t.getTime()-6e4);r>s&&o.hasSubscription?(console.log("Using fresh cached subscription data on initial mount"),J(!0),l(e=>({...e,userHasAccess:!0}))):console.log("Cached subscription data is not fresh enough or inactive")}catch(e){console.error("Error parsing cached subscription data:",e)}let r=localStorage.getItem("purchaseCheckData_"+o);if(r)try{JSON.parse(r).hasPurchased&&(console.log("Using cached purchase data on initial mount"),q(!0),U(!0),l(e=>({...e,userHasAccess:!0})))}catch(e){console.error("Error parsing cached purchase data:",e)}}catch(e){console.error("Error checking cached data on mount:",e)}setTimeout(()=>{eg()},300)}},[ee,ec,o,eg]),d)?(0,t.jsxs)("div",{className:x().loadingContainer,children:[(0,t.jsx)("div",{className:x().loadingSpinner}),(0,t.jsx)("p",{children:"Loading book details..."})]}):m?(0,t.jsxs)("div",{className:x().error,children:[(0,t.jsx)("h2",{children:"Error"}),(0,t.jsx)("p",{children:m}),(0,t.jsxs)("div",{style:{marginTop:"20px"},children:[(0,t.jsxs)(a(),{href:"/search",className:x().backButton,children:[(0,t.jsx)(i.QVr,{})," Back to Search"]}),(0,t.jsx)("button",{onClick:ek,style:{display:"none",marginLeft:"10px",padding:"8px 15px",background:"#ff5b5b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Debug Premium Status"})]}),(0,t.jsxs)("div",{style:{display:"none",marginTop:"20px",padding:"10px",background:"#f8f8f8",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.8rem"},children:[(0,t.jsx)("h3",{children:"API Connection Debug Info"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Book ID:"})," ",o]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"API URL:"})," ",h.Sn.BOOKS.DETAILS(o)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Direct URL:"})," https://ebookaura.onrender.com/api/books/",o]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("button",{onClick:()=>window.open("https://ebookaura.onrender.com/api/books/".concat(o),"_blank"),style:{padding:"5px 10px",background:"#4285f4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"10px"},children:"Try Direct API"}),(0,t.jsx)("button",{onClick:()=>{let e=Date.now();window.location.href="".concat(window.location.pathname,"?refresh=").concat(e)},style:{padding:"5px 10px",background:"#34a853",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Force Refresh"})]})]})]}):n?(0,t.jsxs)("div",{className:x().container,children:[(0,t.jsxs)("div",{className:x().header,children:[(0,t.jsxs)(a(),{href:"/search",className:x().backButton,children:[(0,t.jsx)(i.QVr,{})," Back to Search"]}),(0,t.jsx)("button",{onClick:ek,style:{display:"none",marginLeft:"10px",padding:"8px 15px",background:"#5b89ff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},className:x().debugButton,children:ec?"✓ Premium Book":"Debug Premium"})]}),(0,t.jsxs)("div",{className:x().bookDetailContainer,children:[(0,t.jsxs)("div",{className:x().bookInformation,children:[(0,t.jsxs)("div",{className:x().bookCover,children:[n.coverImage?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:n.coverImage,alt:n.title}),(ec||(null==n?void 0:n.price)>0)&&(0,t.jsx)("div",{className:x().premiumOverlay,children:(0,t.jsx)(i.JhU,{className:x().lockIcon})})]}):(0,t.jsxs)("div",{className:x().placeholderCover,children:[(0,t.jsx)(i.vd0,{}),(ec||(null==n?void 0:n.price)>0)&&(0,t.jsx)(i.JhU,{className:x().lockIconPlaceholder})]}),(ec||(null==n?void 0:n.price)>0)&&(0,t.jsxs)("div",{className:x().premiumBadge,children:[(0,t.jsx)(i.Hu1,{className:x().crownIcon})," Premium"]})]}),(0,t.jsxs)("div",{className:x().bookInfo,children:[(0,t.jsx)("h1",{className:x().title,children:n.title}),(0,t.jsxs)("p",{className:x().author,children:["by ",n.author]}),(0,t.jsxs)("div",{className:x().categoryInfo,children:[(0,t.jsx)("p",{className:x().category,children:n.category}),(ec||(null==n?void 0:n.price)>0)&&(0,t.jsxs)("span",{className:x().premiumTag,children:[(0,t.jsx)(i.Hu1,{className:x().premiumIcon})," Premium"]})]}),(0,t.jsxs)("div",{className:x().stats,children:[(0,t.jsxs)("span",{className:x().stat,children:[(0,t.jsx)(i.Ny1,{})," ",n.views," views"]}),(0,t.jsxs)("span",{className:x().stat,children:[(0,t.jsx)(i.WCW,{})," ",n.downloads," downloads"]}),n.averageRating>0&&(0,t.jsxs)("span",{className:x().stat,children:[(0,t.jsx)(i.gt3,{})," ",n.averageRating.toFixed(1)]}),n.pageSize>0&&(0,t.jsxs)("span",{className:x().stat,children:[(0,t.jsx)(i.t69,{})," ",n.pageSize," pages"]}),n.fileSizeMB>0&&(0,t.jsxs)("span",{className:x().stat,children:[(0,t.jsx)(i.t69,{})," ",n.fileSizeMB," MB"]})]}),(0,t.jsxs)("div",{className:x().description,children:[(0,t.jsx)("h2",{children:"Description"}),(0,t.jsx)("p",{children:n.description})]}),(0,t.jsxs)("div",{className:x().tags,children:[(0,t.jsx)("h2",{children:"Tags"}),(0,t.jsxs)("div",{className:x().tagList,children:[n.tags&&n.tags.map((e,o)=>(0,t.jsx)("span",{className:x().tag,children:e},o)),(!n.tags||0===n.tags.length)&&(0,t.jsx)("span",{className:x().noTags,children:"No tags"})]})]}),(ec||(null==n?void 0:n.price)>0)&&(0,t.jsxs)("div",{className:x().premiumPurchaseContainer,children:[M&&(0,t.jsxs)("div",{style:{display:M?"block":"none",marginTop:"20px",padding:"15px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"5px",fontSize:"0.85rem"},children:[(0,t.jsx)("h3",{children:"Book Status Debug Information"}),(0,t.jsxs)("ul",{style:{listStyleType:"none",padding:0},children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Book ID:"})," ",o]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Title:"})," ",null==n?void 0:n.title]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Raw isPremium:"})," ",String(null==n?void 0:n.isPremium)]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Raw price:"})," ",String(null==n?void 0:n.price)]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"isPremium type:"})," ",typeof(null==n?void 0:n.isPremium)]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"price type:"})," ",typeof(null==n?void 0:n.price)]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Computed isPremiumBook:"})," ",String(ec)]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Premium Status:"})," ",ec?"Premium Book":"Free Book"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Has Purchased:"})," ",ed?"Yes":"No"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Is Logged In:"})," ",ee?"Yes":"No"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"User Coins:"})," ",(null==Q?void 0:Q.coins)||0]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Book Price:"})," ",eh]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Has Enough Coins:"})," ",eu?"Yes":"No"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"API URL:"})," ",h.Sn.BOOKS.DETAILS(o)]})]}),(0,t.jsxs)("div",{style:{marginTop:"15px",display:"flex",gap:"10px"},children:[(0,t.jsx)("button",{onClick:()=>K(!1),style:{background:"#dc3545",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer"},children:"Hide Debug Info"}),(0,t.jsx)("button",{onClick:ek,style:{background:"#28a745",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer"},children:"Force Premium Check"}),(0,t.jsx)("button",{onClick:()=>{ep(o)},style:{background:"#007bff",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer"},children:"Refresh Book Data"})]})]}),!M&&(0,t.jsx)("button",{onClick:()=>K(!0),style:{display:"none",background:"#007bff",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",marginBottom:"10px"},children:"Show Debug Info"}),(0,t.jsxs)("div",{className:x().premiumLabel,children:[(0,t.jsx)(i.Hu1,{className:x().crownIcon})," Premium Book"]}),(0,t.jsxs)("div",{className:x().premiumInfo,children:[(0,t.jsxs)("div",{className:x().premiumPrice,children:[(0,t.jsx)(i.cEG,{className:x().coinIcon}),(0,t.jsx)("span",{className:x().priceValue,children:eh})," coins"]}),ee&&(0,t.jsxs)("div",{className:x().userCoins,children:[(0,t.jsx)("span",{children:"Your balance: "}),(0,t.jsx)(i.cEG,{className:x().coinIcon}),(0,t.jsx)("span",{className:x().coinValue,children:(null==Q?void 0:Q.coins)||0})," coins"]})]}),ee&&!ed&&!W&&eh>0&&!L&&(0,t.jsxs)(t.Fragment,{children:[H&&(0,t.jsx)("div",{className:x().purchaseError,children:H}),(0,t.jsx)("button",{onClick:()=>{if(!n||!o)return void console.error("Cannot purchase: Book data or ID is missing");if(!ee){A("You need to be logged in to purchase this book"),X.push("/login");return}return ed||L?void S.oR.info("You already own this book"):W?void S.oR.info("You already have access to this book through your subscription"):eu?void G(!0):void Y("You need ".concat(eh-Q.coins," more coins to purchase this book"))},className:"".concat(x().purchaseButton," ").concat(eu?"":x().disabledPurchase),disabled:T||!eu,children:T?"Processing...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.cEG,{className:x().buttonCoinIcon}),"Purchase with Coins"]})}),!eu&&Q&&(0,t.jsxs)("div",{className:x().insufficientCoins,children:["You need ",(0,t.jsx)("strong",{children:eh-Number(Q.coins||0)})," more coins to purchase this book.",(0,t.jsxs)(a(),{href:"/coins",className:x().getCoinsLink,children:[(0,t.jsx)(i.cEG,{className:x().coinIcon})," Get more coins"]})]})]}),(!0===ed||!0===L)&&(0,t.jsxs)("div",{className:x().purchaseSuccess,children:[(0,t.jsx)(i.CMH,{})," You own this book! You can now access the full content."]}),!ee&&(0,t.jsxs)("div",{className:x().purchaseLogin,children:[(0,t.jsxs)(a(),{href:"/login",className:x().loginLink,children:[(0,t.jsx)(i.x$1,{className:x().userIcon})," Log in"]}),"to purchase this premium book.",!1]})]}),(0,t.jsx)("div",{className:x().actions,children:n.isCustomUrl?(0,t.jsxs)("button",{onClick:()=>{if(!n)return void console.error("Cannot open custom URL: Book data is missing");try{D(!0);let e=n.customURLPDF||n.pdfUrl;console.log("Opening custom URL PDF:",e);try{fetch(h.Sn.BOOKS.DOWNLOAD(o),{method:"POST"}).then(()=>{l(e=>({...e,downloads:(e.downloads||0)+1})),window.open(e,"_blank")}).catch(o=>{console.warn("Failed to record download count for custom URL:",o),window.open(e,"_blank")}).finally(()=>{D(!1)})}catch(o){console.error("Error opening custom URL:",o),window.open(e,"_blank"),D(!1)}}catch(e){console.error("Error opening custom URL:",e),alert("Failed to open the PDF. Please try again or contact support if the problem persists."),D(!1)}},className:"".concat(x().openUrlButton," ").concat(!ec||ed||W||L?"":x().disabledButton),disabled:I||ec&&!ed&&!W&&!L,children:[(0,t.jsx)(i.t69,{})," ",I?"Opening...":"Open PDF"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:ev,className:"".concat(x().viewButton," ").concat(!ec||ed||W||L?"":x().disabledButton),disabled:b||ec&&!ed&&!W&&!L,children:[(0,t.jsx)(i.t69,{})," ",b?"Opening...":"View PDF"]}),(0,t.jsxs)("button",{onClick:eb,className:"".concat(x().downloadButton," ").concat(!ec||ed||W||L?"":x().disabledButton),disabled:p||ec&&!ed&&!W&&!L,children:[(0,t.jsx)(i.WCW,{})," ",p?"Downloading...":"Download PDF"]})]})})]})]}),(0,t.jsx)(k,{bookId:o})]}),z&&(0,t.jsx)("div",{className:x().confirmationOverlay,children:(0,t.jsxs)("div",{className:x().confirmationDialog,children:[(0,t.jsx)("h3",{children:"Confirm Purchase"}),(0,t.jsxs)("p",{children:['Are you sure you want to purchase "',n.title,'" for ',eh," coins?"]}),(0,t.jsxs)("div",{className:x().confirmationButtons,children:[(0,t.jsx)("button",{onClick:()=>{G(!1)},className:x().cancelButton,children:"Cancel"}),(0,t.jsx)("button",{onClick:e_,className:x().confirmButton,children:"Confirm Purchase"})]})]})}),f&&E&&(0,t.jsx)(R,{pdfUrl:E,onClose:()=>{N(!1),C(null)},title:n.title,allowDownload:!0,onDownload:eb}),ee&&M&&(0,t.jsxs)("div",{className:x().debugSection,style:{margin:"10px 0",padding:"10px",background:"#f8f9fa",borderRadius:"4px"},children:[(0,t.jsx)("strong",{children:"Debug Info:"}),(0,t.jsxs)("div",{children:["Premium Book: ",ec?"Yes":"No"]}),(0,t.jsxs)("div",{children:["Price: ",eh," coins"]}),(0,t.jsxs)("div",{children:["User Purchased: ",ed?"Yes":"No"]}),(0,t.jsxs)("div",{children:["Has Subscription: ",W?"Yes":"No"]}),(0,t.jsxs)("div",{children:["Has Access: ",ed?"Yes":"No"]})]}),ee&&ec&&W&&(0,t.jsxs)("div",{className:"".concat(x().subscriptionNotice," ").concat(x().accessNotice),style:{margin:"10px 0",padding:"15px",background:"#e9f7ff",borderRadius:"8px",border:"1px solid #4c9aff",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",fontWeight:"500"},children:[(0,t.jsx)(i.Hu1,{style:{color:"#ffd700",fontSize:"24px"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Premium Access"}),(0,t.jsx)("span",{children:"You have access to this book through your active subscription. Enjoy reading!"})]})]}),ee&&ec&&(!0===ed||!0===L)&&!W&&(0,t.jsxs)("div",{className:"".concat(x().purchaseSuccess," ").concat(x().accessNotice),style:{margin:"10px 0",padding:"15px",background:"#e9fae9",borderRadius:"8px",border:"1px solid #4caf50",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",fontWeight:"500"},children:[(0,t.jsx)(i.CMH,{style:{color:"#4caf50",fontSize:"24px"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Purchased"}),(0,t.jsx)("span",{children:"You own this book! You've purchased this premium content."})]})]}),M&&(0,t.jsxs)("div",{style:{position:"fixed",bottom:"10px",right:"10px",background:"rgba(0,0,0,0.7)",color:"white",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",zIndex:9999,maxWidth:"300px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"API Status:"})," ",ei.current?"\uD83D\uDD04 Fetching...":"✅ Idle"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Book Premium:"})," ",ec?"✅ Yes":"❌ No"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Access:"})," ",ed?"✅ Yes":"❌ No"]}),ed&&(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Access Type:"})," ",W?"\uD83D\uDD11 Subscription":V?"\uD83D\uDCB0 Purchased":"❓ Unknown"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Subscription Check:"})," ",Z?"\uD83D\uDD04 Active":"⏹️ Inactive"]})]})]}):(0,t.jsxs)("div",{className:x().error,children:[(0,t.jsx)("h2",{children:"Book Not Found"}),(0,t.jsx)("p",{children:"We couldn't find the book you're looking for."}),(0,t.jsxs)(a(),{href:"/search",className:x().backButton,children:[(0,t.jsx)(i.QVr,{})," Back to Search"]})]})}},17203:(e,o,r)=>{"use strict";r.d(o,{JR:()=>t,Sn:()=>s}),r(72047);let t="https://ebookaura.onrender.com/api",s={AUTH:{LOGIN:"".concat(t,"/auth/login"),REGISTER:"".concat(t,"/auth/register"),ME:"".concat(t,"/auth/me"),FORGOT_PASSWORD:"".concat(t,"/auth/forgot-password"),RESET_PASSWORD:e=>"".concat(t,"/auth/reset-password/").concat(e),VERIFY_EMAIL:"".concat(t,"/auth/verify-email")},BOOKS:{ALL:"".concat(t,"/books"),CATEGORIES:"".concat(t,"/books/categories"),TAGS:"".concat(t,"/books/tags"),DETAILS:e=>"".concat(t,"/books/").concat(e),PDF:e=>"".concat(t,"/books/").concat(e,"/pdf"),PDF_CONTENT:e=>"".concat(t,"/books/").concat(e,"/pdf-content"),DOWNLOAD:e=>"".concat(t,"/books/").concat(e,"/download"),REVIEWS:e=>"".concat(t,"/books/").concat(e,"/reviews"),RATING:e=>"".concat(t,"/books/").concat(e,"/rating"),ADD_REVIEW:e=>"".concat(t,"/books/").concat(e,"/reviews")},UPLOAD:{FILE:"".concat(t,"/upload"),PDF:"".concat(t,"/upload/pdf"),DELETE_FILE:e=>"".concat(t,"/upload/").concat(e),DELETE_BOOK:e=>"".concat(t,"/upload/book/").concat(e)},USER:{PROFILE:"".concat(t,"/users/profile"),UPDATE_PROFILE:"".concat(t,"/users/profile"),UPDATE_IMAGE:"".concat(t,"/users/profile/image"),BOOKMARKS:"".concat(t,"/users/bookmarks")}}},32695:e=>{e.exports={reviewContainer:"BookReview_reviewContainer__PXZXE",reviewHeader:"BookReview_reviewHeader__exUT_",reviewSummary:"BookReview_reviewSummary__m9pQe",totalRating:"BookReview_totalRating__pWZXj",overallRating:"BookReview_overallRating__ZqhqM",ratingValue:"BookReview_ratingValue__Ek1q_",ratingStars:"BookReview_ratingStars__TajM3",totalBadge:"BookReview_totalBadge__XRXmr",filterSortContainer:"BookReview_filterSortContainer__VbWZM",ratingFilters:"BookReview_ratingFilters__2sfGt",highlightFilters:"BookReview_highlightFilters__e7dxy",filtersHeader:"BookReview_filtersHeader__Bj9bO",pulseHeader:"BookReview_pulseHeader__10fad",activeFilterIndicator:"BookReview_activeFilterIndicator__0KGTt",filterBadge:"BookReview_filterBadge___lSTT",pulseBorder:"BookReview_pulseBorder__WH3PL",sortBadge:"BookReview_sortBadge__CS43D",fadeIn:"BookReview_fadeIn__ejiO2",clearFilterButton:"BookReview_clearFilterButton__DFeGj",filterOptions:"BookReview_filterOptions__Lr7_r",filterLabel:"BookReview_filterLabel__BUgIR",ratingFilterButtons:"BookReview_ratingFilterButtons__SNy3w",ratingFilterButton:"BookReview_ratingFilterButton__zBp4l",activeFilter:"BookReview_activeFilter__7fooV",filterStar:"BookReview_filterStar__D4fwS",sortOptions:"BookReview_sortOptions__isXrS",sortButtons:"BookReview_sortButtons__m0mZx",sortButton:"BookReview_sortButton__48q83",activeSort:"BookReview_activeSort__vJjfY",pulseDot:"BookReview_pulseDot__dlqnC",reviewContent:"BookReview_reviewContent__cNFFI",averageRating:"BookReview_averageRating__GLivu",ratingNumber:"BookReview_ratingNumber__2uD8e",reviewCount:"BookReview_reviewCount__gFeSv",displayStar:"BookReview_displayStar__Fz3J4",reviewForm:"BookReview_reviewForm__KzYxy",success:"BookReview_success__phiTs",submitError:"BookReview_submitError__GK4zL",ratingSelector:"BookReview_ratingSelector__Y8L9Q",stars:"BookReview_stars__vHpqj",ratingStar:"BookReview_ratingStar__7YZu8",commentField:"BookReview_commentField__HbZ9h",optional:"BookReview_optional__5fC_J",textarea:"BookReview_textarea__uqAZb",characterCount:"BookReview_characterCount__avyYp",submitButton:"BookReview_submitButton__uifGG",loginPrompt:"BookReview_loginPrompt__nl1B6",reviewsList:"BookReview_reviewsList__36HJ_",reviewsHeader:"BookReview_reviewsHeader__VE_c3",noReviews:"BookReview_noReviews__EL0Br",reviewItem:"BookReview_reviewItem__wF7Ok",reviewerInfo:"BookReview_reviewerInfo__yDoe0",reviewerImage:"BookReview_reviewerImage__T3neO",reviewerPlaceholder:"BookReview_reviewerPlaceholder__VLVSv",reviewerName:"BookReview_reviewerName___r0hh",reviewDate:"BookReview_reviewDate__fxaMW",reviewMetadata:"BookReview_reviewMetadata__cvN1d",deleteButton:"BookReview_deleteButton__sF4DA",reviewRating:"BookReview_reviewRating__TTay3",reviewText:"BookReview_reviewText__OjgJ1",confirmOverlay:"BookReview_confirmOverlay__3SoDg",confirmDialog:"BookReview_confirmDialog__rHKbe",slideUp:"BookReview_slideUp__26h3O",confirmHeader:"BookReview_confirmHeader__9ZJSd",closeButton:"BookReview_closeButton__ABCqQ",confirmButtons:"BookReview_confirmButtons__fnWlf",cancelButton:"BookReview_cancelButton__FmPbe",deleteConfirmButton:"BookReview_deleteConfirmButton__bWD9h",loading:"BookReview_loading__xP9sm",error:"BookReview_error__dxxxC",pulse:"BookReview_pulse__kJ1qE",filterButtons:"BookReview_filterButtons__HLVmO",filterStars:"BookReview_filterStars__VTPC6",filterCount:"BookReview_filterCount__bXmzR",filterBadgeContent:"BookReview_filterBadgeContent__IES9e",clearFilterBadge:"BookReview_clearFilterBadge__Kxty7",spinner:"BookReview_spinner__T90VY",spin:"BookReview_spin___BTC6",selectedRating:"BookReview_selectedRating__1uk3e",sortSelect:"BookReview_sortSelect__tzzV_",pagination:"BookReview_pagination__e2wwO",pageButton:"BookReview_pageButton__vOxgM",disabled:"BookReview_disabled__fnx_G",pageInfo:"BookReview_pageInfo__YqhK4",alreadyReviewed:"BookReview_alreadyReviewed__chKxo",userReviewBox:"BookReview_userReviewBox__RSQZF",userReviewHeader:"BookReview_userReviewHeader__fX13K",userReviewRating:"BookReview_userReviewRating__391lE",ratingText:"BookReview_ratingText__GR4Xk",deleteUserReviewButton:"BookReview_deleteUserReviewButton__kZBBT",userReviewComment:"BookReview_userReviewComment__O91VY",userReviewDate:"BookReview_userReviewDate__kM04j",slideDown:"BookReview_slideDown__twYYN"}},46264:(e,o,r)=>{"use strict";r.d(o,{D8:()=>c,_h:()=>a,nV:()=>l,wQ:()=>i,zN:()=>n});var t=r(72047);let s={PLANS:36e5,CURRENT:3e5,HISTORY:6e5},i=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let o="subscription_plans",{shouldMakeCall:r,cachedData:i}=(0,t.UB)(o,s.PLANS,e);if(!r&&i)return i;let n=await (0,t.dw)("/subscriptions/plans");if(n){let e=n.plans||n.data||[],r={...n,plans:e};return(0,t.yt)(o,r),r}return n}catch(e){throw console.error("Error fetching subscription plans:",e),e}},n=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let o=localStorage.getItem("token");if(!o)throw Error("Authentication required");let r="current_subscription",{shouldMakeCall:i,cachedData:n}=(0,t.UB)(r,s.CURRENT,e);if(!i&&n)return n;let a=await (0,t.dw)("/subscriptions/current",{headers:{Authorization:"Bearer ".concat(o)}});return(0,t.yt)(r,a),a}catch(e){throw console.error("Error fetching current subscription:",e),e}},a=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let o=localStorage.getItem("token");if(!o)throw Error("Authentication required");let r="subscription_history",{shouldMakeCall:i,cachedData:n}=(0,t.UB)(r,s.HISTORY,e);if(!i&&n)return n;let a=await (0,t.dw)("/subscriptions/history",{headers:{Authorization:"Bearer ".concat(o)}});return(0,t.yt)(r,a),a}catch(e){throw console.error("Error fetching subscription history:",e),e}},c=async e=>{try{let o=localStorage.getItem("token");if(!o)throw Error("Authentication required");let r=await (0,t.Xj)("/subscriptions",e,{headers:{Authorization:"Bearer ".concat(o)}});return(0,t.yt)("current_subscription",null),(0,t.yt)("subscription_history",null),r}catch(e){throw console.error("Error purchasing subscription:",e),e}},l=async(e,o)=>{try{let r=localStorage.getItem("token");if(!r)throw Error("Authentication required");let s=await (0,t.TA)("/subscriptions/".concat(e),o,{headers:{Authorization:"Bearer ".concat(r)}});return(0,t.yt)("current_subscription",null),(0,t.yt)("subscription_history",null),s}catch(e){throw console.error("Error updating subscription:",e),e}}},53116:(e,o,r)=>{"use strict";r.d(o,{$P:()=>i,PZ:()=>u,Yv:()=>l,getUserCoins:()=>s,lD:()=>n,vW:()=>d,wA:()=>c,z$:()=>a});var t=r(72047);let s=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{if(!e.ok)throw Error("Failed to get coin balance");return e.json()})}catch(e){throw console.error("Error getting user coins:",e),e}},i=async e=>{try{let o=localStorage.getItem("token");if(!o)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/update-session"),{method:"POST",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"},body:JSON.stringify({sessionDuration:e})}).then(e=>{if(!e.ok)throw Error("Failed to update session time");return e.json()})}catch(e){throw console.error("Error updating session time:",e),e}},n=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/session-status"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{if(!e.ok)throw Error("Failed to get session status");return e.json()})}catch(e){throw console.error("Error getting session status:",e),e}},a=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/activity-reward"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.ok?e.json():e.json().then(e=>{throw Error(e.message||"Failed to claim activity reward")}))}catch(e){throw console.error("Error claiming activity reward coins:",e),e}},c=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/daily"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.ok?e.json():e.json().then(e=>{throw Error(e.message||"Failed to claim daily coins")}))}catch(e){throw console.error("Error claiming daily coins:",e),e}},l=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/daily-status"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{if(!e.ok)throw Error("Failed to check daily coins status");return e.json()})}catch(e){throw console.error("Error checking daily coins status:",e),e}},d=async e=>{try{let o=localStorage.getItem("token");if(!o)throw Error("Authentication required");return await (0,t.Xj)("/coins/purchase/".concat(e),{},{headers:{Authorization:"Bearer ".concat(o)}})}catch(e){throw console.error("Error purchasing book:",e),e}},u=async e=>{try{let o=localStorage.getItem("token");if(!o)throw Error("Authentication required");return await (0,t.dw)("/users/check-purchase/".concat(e),{headers:{Authorization:"Bearer ".concat(o)}})}catch(e){throw console.error("Error checking book purchase:",e),e}}},71759:e=>{e.exports={container:"book_container__t7HpC",header:"book_header__KPynt",backButton:"book_backButton__vDnG6",bookDetailContainer:"book_bookDetailContainer__v_R0K",bookInformation:"book_bookInformation__StZ6g",bookCover:"book_bookCover__wj7vL",premiumOverlay:"book_premiumOverlay__U1vfK",lockIcon:"book_lockIcon__F6QwL",lockIconPlaceholder:"book_lockIconPlaceholder__moAc7",premiumBadge:"book_premiumBadge__MoqZw",crownIcon:"book_crownIcon__tVYMH",categoryInfo:"book_categoryInfo__Bu7tP",premiumTag:"book_premiumTag__EMpPl",premiumIcon:"book_premiumIcon__3M5jJ",premiumMessage:"book_premiumMessage__XV4N8",lockIconMessage:"book_lockIconMessage__46A1_",loginLink:"book_loginLink__vAMwB",disabledButton:"book_disabledButton__TW6dJ",placeholderCover:"book_placeholderCover__5P_sO",title:"book_title__xHEy4",author:"book_author__FsqOe",category:"book_category__zzF9H",stats:"book_stats__wU7Ul",stat:"book_stat__mAw2q",description:"book_description__T_l8Y",tags:"book_tags__gKDwb",tagList:"book_tagList__Gixb3",tag:"book_tag__Kk0Gj",noTags:"book_noTags__Qq9um",actions:"book_actions__zgoNS",viewButton:"book_viewButton__yhdR4",downloadButton:"book_downloadButton__xSZiq",openUrlButton:"book_openUrlButton__rZVel",loading:"book_loading__jGrZj",error:"book_error__olOYE",buttonGroup:"book_buttonGroup__1dUE_",loadingContainer:"book_loadingContainer__IEHKf",loadingSpinner:"book_loadingSpinner__PQ2dU",spin:"book_spin__v3jCK",actionButtons:"book_actionButtons__4FEwM",searchButton:"book_searchButton__YOZRF",errorDetails:"book_errorDetails__zCEXA",premiumPurchaseContainer:"book_premiumPurchaseContainer__nB9yX",premiumPrice:"book_premiumPrice__wmzKZ",coinIcon:"book_coinIcon__5w8cr",priceValue:"book_priceValue__xy2Zn",purchaseButton:"book_purchaseButton__HQhwt",purchaseError:"book_purchaseError___ubRi",purchaseSuccess:"book_purchaseSuccess__ekger",insufficientCoins:"book_insufficientCoins__gGYYV",getCoinsLink:"book_getCoinsLink__nvlTT",confirmationOverlay:"book_confirmationOverlay__Yc4oV",confirmationDialog:"book_confirmationDialog__Qnw0H",fadeIn:"book_fadeIn__B4bvh",confirmationButtons:"book_confirmationButtons__C0Pf2",cancelButton:"book_cancelButton__pmZIc",confirmButton:"book_confirmButton__51wVy"}}}]);