(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7839],{35695:(e,s,a)=>{"use strict";var i=a(18999);a.o(i,"useParams")&&a.d(s,{useParams:function(){return i.useParams}}),a.o(i,"usePathname")&&a.d(s,{usePathname:function(){return i.usePathname}}),a.o(i,"useRouter")&&a.d(s,{useRouter:function(){return i.useRouter}}),a.o(i,"useSearchParams")&&a.d(s,{useSearchParams:function(){return i.useSearchParams}})},81638:e=>{e.exports={container:"verify-email_container__zVpAv",verifyBox:"verify-email_verifyBox__F7G_7",fadeIn:"verify-email_fadeIn__rE06L",header:"verify-email_header__JBB_3",title:"verify-email_title__BGXl6",titleEbook:"verify-email_titleEbook__jDHI5",titleAura:"verify-email_titleAura__dNFbX",subtitle:"verify-email_subtitle__I66wK",form:"verify-email_form__erwCx",formGroup:"verify-email_formGroup__aosRf",label:"verify-email_label__FOAz_",input:"verify-email_input__8LKNb",submitButton:"verify-email_submitButton___p4m8",resendCode:"verify-email_resendCode__c86iw",resendButton:"verify-email_resendButton__hfUZg",backToLogin:"verify-email_backToLogin__y1l1H",errorMessage:"verify-email_errorMessage__pBcgX",shake:"verify-email_shake__wCtOA",successMessage:"verify-email_successMessage__ONWxL",loading:"verify-email_loading__g6Op4",pulse:"verify-email_pulse__r9uf0"}},82235:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var i=a(95155),r=a(12115),l=a(35695),t=a(6874),n=a.n(t),c=a(81638),o=a.n(c),d=a(56068),u=a(72047);function m(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)(),[a,t]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[_,v]=(0,r.useState)(""),[x,j]=(0,r.useState)(!1),{login:y}=(0,d.h)();(0,r.useEffect)(()=>{let e=s.get("email");e&&t(e)},[s]);let p=async s=>{if(s.preventDefault(),v(""),!a)return void v("Email is required");if(!c||6!==c.length)return void v("Please enter a valid 6-digit verification code");f(!0);try{let s=await (0,u.Xj)("/users/verify-email",{email:a,code:c});j(!0),y(s),setTimeout(()=>{e.push("/")},2e3)}catch(e){v(e.message)}finally{f(!1)}},b=async()=>{if(!a)return void v("Email is required");f(!0),v("");try{await (0,u.Xj)("/users/resend-verification",{email:a}),v(""),alert("A new verification code has been sent to your email")}catch(e){v(e.message)}finally{f(!1)}};return x?(0,i.jsx)("div",{className:o().container,children:(0,i.jsxs)("div",{className:o().verifyBox,children:[(0,i.jsxs)("div",{className:o().header,children:[(0,i.jsxs)("h1",{className:o().title,children:[(0,i.jsx)("span",{className:o().titleEbook,children:"Ebook"}),(0,i.jsx)("span",{className:o().titleAura,children:"Aura"})]}),(0,i.jsx)("p",{className:o().subtitle,children:"Email Verification Successful!"})]}),(0,i.jsxs)("div",{className:o().successMessage,children:[(0,i.jsx)("p",{children:"Your email has been verified successfully."}),(0,i.jsx)("p",{children:"You will be redirected to the homepage in a moment..."})]})]})}):(0,i.jsx)("div",{className:o().container,children:(0,i.jsxs)("div",{className:o().verifyBox,children:[(0,i.jsxs)("div",{className:o().header,children:[(0,i.jsxs)("h1",{className:o().title,children:[(0,i.jsx)("span",{className:o().titleEbook,children:"Ebook"}),(0,i.jsx)("span",{className:o().titleAura,children:"Aura"})]}),(0,i.jsx)("p",{className:o().subtitle,children:"Verify Your Email"})]}),_&&(0,i.jsx)("div",{className:o().errorMessage,children:_}),(0,i.jsxs)("form",{onSubmit:p,className:o().form,children:[(0,i.jsxs)("div",{className:o().formGroup,children:[(0,i.jsx)("label",{htmlFor:"email",className:o().label,children:"Email Address"}),(0,i.jsx)("input",{type:"email",id:"email",className:o().input,placeholder:"Enter your email",value:a,onChange:e=>t(e.target.value),required:!0,disabled:!!s.get("email")})]}),(0,i.jsxs)("div",{className:o().formGroup,children:[(0,i.jsx)("label",{htmlFor:"code",className:o().label,children:"Verification Code"}),(0,i.jsx)("input",{type:"text",id:"code",className:o().input,placeholder:"Enter 6-digit code",value:c,onChange:e=>m(e.target.value.replace(/[^0-9]/g,"").slice(0,6)),required:!0,pattern:"[0-9]{6}",maxLength:"6"})]}),(0,i.jsx)("button",{type:"submit",className:o().submitButton,disabled:h,children:h?"Verifying...":"Verify Email"})]}),(0,i.jsx)("div",{className:o().resendCode,children:(0,i.jsxs)("p",{children:["Didn't receive the code? ",(0,i.jsx)("button",{type:"button",className:o().resendButton,onClick:b,disabled:h,children:"Resend Code"})]})}),(0,i.jsx)("div",{className:o().backToLogin,children:(0,i.jsx)(n(),{href:"/login",children:"Back to Login"})})]})})}function h(){return(0,i.jsx)("div",{className:o().container,children:(0,i.jsxs)("div",{className:o().verifyBox,children:[(0,i.jsxs)("div",{className:o().header,children:[(0,i.jsxs)("h1",{className:o().title,children:[(0,i.jsx)("span",{className:o().titleEbook,children:"Ebook"}),(0,i.jsx)("span",{className:o().titleAura,children:"Aura"})]}),(0,i.jsx)("p",{className:o().subtitle,children:"Verify Your Email"})]}),(0,i.jsx)("div",{className:o().loading,children:"Loading verification form..."})]})})}function f(){return(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)(h,{}),children:(0,i.jsx)(m,{})})}},97133:(e,s,a)=>{Promise.resolve().then(a.bind(a,82235))}},e=>{var s=s=>e(e.s=s);e.O(0,[1945,6874,6068,8441,1684,7358],()=>s(97133)),_N_E=e.O()}]);