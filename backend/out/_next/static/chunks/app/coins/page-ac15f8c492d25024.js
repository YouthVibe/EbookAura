(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{572:e=>{e.exports={container:"coins_container__jPQNN",header:"coins_header__vO_Zr",backButton:"coins_backButton__hPpE_",title:"coins_title__3Ydob",loading:"coins_loading__w4HnG",error:"coins_error__SQE3E",success:"coins_success__drL8N",coinsBalance:"coins_coinsBalance__tZC2g",coinIcon:"coins_coinIcon__Midci",coinCount:"coins_coinCount__5CvjD",coinLabel:"coins_coinLabel__x6MZA",actionsContainer:"coins_actionsContainer__1ojFE",rewardCard:"coins_rewardCard__BNoxo",rewardHeader:"coins_rewardHeader__JpLt1",rewardIcon:"coins_rewardIcon__eexhp",rewardTitle:"coins_rewardTitle__YF_aA",rewardDescription:"coins_rewardDescription__Wbox8",errorMessage:"coins_errorMessage__C0bxo",nextClaimTime:"coins_nextClaimTime__pj_uH",claimButton:"coins_claimButton__P4qzt",adButton:"coins_adButton__jyLsU",buttonIcon:"coins_buttonIcon__xAC40",progressContainer:"coins_progressContainer__YhGzB",progressBar:"coins_progressBar__izLn7",progressText:"coins_progressText__X6Vws",activityButton:"coins_activityButton__J8HWP",coinsAvailable:"coins_coinsAvailable__o2LPY",smallCoinIcon:"coins_smallCoinIcon__ZiZHt"}},18976:(e,a,t)=>{Promise.resolve().then(t.bind(t,87895))},51879:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});var r=t(95155),s=t(12115);let o=()=>((0,s.useEffect)(()=>{let e=document.createElement("script");e.type="text/javascript",e.src="https://highperformanceformat.com/7e8ec1de91b1d000fc448ad0674d6d34/invoke.js";let a=document.createElement("script");a.type="text/javascript",a.innerHTML="\n      atOptions = {\n        'key' : '7e8ec1de91b1d000fc448ad0674d6d34',\n        'format' : 'iframe',\n        'height' : 90,\n        'width' : 728,\n        'params' : {}\n      };\n    ";let t=document.getElementById("ad-container");t.appendChild(a),t.appendChild(e)},[]),(0,r.jsx)("div",{id:"ad-container",style:{textAlign:"center",margin:"20px 0"}}))},53116:(e,a,t)=>{"use strict";t.d(a,{$P:()=>o,PZ:()=>m,Yv:()=>l,getUserCoins:()=>s,jv:()=>d,lD:()=>n,wA:()=>c,z$:()=>i});var r=t(72047);let s=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{if(!e.ok)throw Error("Failed to get coin balance");return e.json()})}catch(e){throw console.error("Error getting user coins:",e),e}},o=async e=>{try{let a=localStorage.getItem("token");if(!a)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/update-session"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({sessionDuration:e})}).then(e=>{if(!e.ok)throw Error("Failed to update session time");return e.json()})}catch(e){throw console.error("Error updating session time:",e),e}},n=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/session-status"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{if(!e.ok)throw Error("Failed to get session status");return e.json()})}catch(e){throw console.error("Error getting session status:",e),e}},i=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/activity-reward"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.ok?e.json():e.json().then(e=>{throw Error(e.message||"Failed to claim activity reward")}))}catch(e){throw console.error("Error claiming activity reward coins:",e),e}},c=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/daily"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.ok?e.json():e.json().then(e=>{throw Error(e.message||"Failed to claim daily coins")}))}catch(e){throw console.error("Error claiming daily coins:",e),e}},l=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/daily-status"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{if(!e.ok)throw Error("Failed to check daily coins status");return e.json()})}catch(e){throw console.error("Error checking daily coins status:",e),e}},d=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/ad-reward"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({adUrl:"https://www.profitableratecpm.com/tv0ps1rfet?key=a753be44cf1e6c5a853397fa67fe886c"})}).then(e=>{if(!e.ok)throw Error("Failed to claim ad reward coins");return e.json()})}catch(e){throw console.error("Error claiming ad reward coins:",e),e}},m=async e=>{try{let a=localStorage.getItem("token");if(!a)throw Error("Authentication required");return await (0,r.dw)("/users/check-purchase/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}})}catch(e){throw console.error("Error checking book purchase:",e),e}}},87895:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var r=t(95155),s=t(12115),o=t(35695),n=t(6874),i=t.n(n),c=t(29911),l=t(56068),d=t(572),m=t.n(d),h=t(53116),u=t(51879),w=t(63554);function p(){let{user:e,updateUserCoins:a}=(0,l.h)(),t=(0,o.useRouter)(),[n,d]=(0,s.useState)(!0),[p,_]=(0,s.useState)(!1),[y,g]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1),[v,C]=(0,s.useState)(""),[N,A]=(0,s.useState)(""),[T,E]=(0,s.useState)(""),[k,S]=(0,s.useState)(""),[B,I]=(0,s.useState)(null),[R,D]=(0,s.useState)(!1),[P,z]=(0,s.useState)(!1),[F,O]=(0,s.useState)({sessionTimeToday:0,requiredTime:60,hasClaimedReward:!1,progress:0,canClaimReward:!1,nextRewardTime:null,minutesAccumulated:0,coinsAvailable:0}),[q,L]=(0,s.useState)(null);(0,s.useEffect)(()=>(!R&&e?(G(),D(!0),M()):e||t.push("/login"),()=>{q&&clearInterval(q)}),[e,t,R]);let M=()=>{H(),L(setInterval(()=>{(0,h.$P)(30).then(e=>{O(a=>({...a,sessionTimeToday:e.sessionTimeToday,canClaimReward:e.canClaimReward,progress:Math.floor(e.sessionTimeToday%60/60*100),minutesAccumulated:e.minutesAccumulated||0,coinsAvailable:5*(e.minutesAccumulated||0)}))}).catch(e=>console.error("Error updating session time:",e))},3e4))},H=async()=>{try{let e=await (0,h.lD)();e&&O({sessionTimeToday:e.sessionTimeToday||0,requiredTime:e.requiredTime||60,hasClaimedReward:!1,progress:e.progress||0,canClaimReward:e.canClaimReward||!1,nextRewardTime:null,minutesAccumulated:e.minutesAccumulated||0,coinsAvailable:e.coinsAvailable||0})}catch(e){console.error("Error fetching session status:",e)}},G=async()=>{d(!0),C("");try{let t=await (0,h.getUserCoins)();t&&"number"==typeof t.coins&&a(t.coins);let r=await (0,h.Yv)();if(r&&(z(r.hasClaimed),r.hasClaimed&&r.nextRewardTime?I(new Date(r.nextRewardTime)):I(null)),await H(),e.nextAdAvailable&&new Date<new Date(e.nextAdAvailable)){b(!0);let a=new Date(e.nextAdAvailable)-new Date;setTimeout(()=>{b(!1)},Math.min(a,1e4))}}catch(e){console.error("Error fetching coins data:",e),C(e.message||"Failed to fetch coins data")}finally{d(!1)}},W=async()=>{_(!0),E(""),A("");try{let e=await (0,h.wA)();if(e&&"number"==typeof e.coins){a(e.coins),A("Successfully claimed ".concat(e.coinsAdded," daily coins!")),z(!0);let t=new Date;t.setHours(24,0,0,0),I(t)}}catch(e){console.error("Error claiming daily coins:",e),E(e.message||"Failed to claim daily coins"),e.response&&e.response.data&&e.response.data.nextReward&&(I(new Date(e.response.data.nextReward)),z(!0))}finally{_(!1)}},Y=async()=>{g(!0),S(""),A("");try{let e=await (0,h.z$)();e&&"number"==typeof e.coins&&(a(e.coins),A("Successfully claimed ".concat(e.coinsAdded," coins for ").concat(e.minutesSpent," minute(s) of site activity!")),O(e=>({...e,hasClaimedReward:!1,sessionTimeToday:0,progress:0,canClaimReward:!1,minutesAccumulated:0,coinsAvailable:0})),setTimeout(()=>{A("")},5e3))}catch(e){console.error("Error claiming activity reward:",e),S(e.message||"Failed to claim activity reward"),H(),setTimeout(()=>{S("")},5e3)}finally{g(!1)}},Z=e=>{let a=Math.floor(e/60),t=e%60;return"".concat(a,":").concat(t<10?"0":"").concat(t)};return n?(0,r.jsxs)("div",{className:m().container,children:[(0,r.jsxs)("div",{className:m().header,children:[(0,r.jsx)(i(),{href:"/",className:m().backButton,children:(0,r.jsx)(c.QVr,{})}),(0,r.jsx)("h1",{className:m().title,children:"My Coins"})]}),(0,r.jsx)("div",{className:m().loading,children:"Loading coins data..."})]}):(0,r.jsxs)("div",{className:m().container,children:[(0,r.jsx)(u.A,{}),(0,r.jsx)(w.default,{src:"https://pl27076804.profitableratecpm.com/3c/da/7a/3cda7a41ea4dd11feec8917043373eb3.js",strategy:"afterInteractive"}),(0,r.jsxs)("div",{className:m().header,children:[(0,r.jsx)(i(),{href:"/",className:m().backButton,children:(0,r.jsx)(c.QVr,{})}),(0,r.jsx)("h1",{className:m().title,children:"My Coins"})]}),v&&(0,r.jsx)("div",{className:m().error,children:v}),N&&(0,r.jsx)("div",{className:m().success,children:N}),(0,r.jsxs)("div",{className:m().coinsBalance,children:[(0,r.jsx)(c.cEG,{className:m().coinIcon}),(0,r.jsx)("span",{className:m().coinCount,children:(null==e?void 0:e.coins)||0}),(0,r.jsx)("span",{className:m().coinLabel,children:"coins"})]}),(0,r.jsxs)("div",{className:m().actionsContainer,children:[(0,r.jsxs)("div",{className:m().rewardCard,children:[(0,r.jsxs)("div",{className:m().rewardHeader,children:[(0,r.jsx)(c.itz,{className:m().rewardIcon}),(0,r.jsx)("h2",{className:m().rewardTitle,children:"Daily Reward"})]}),(0,r.jsx)("p",{className:m().rewardDescription,children:"Claim your daily reward of 10 coins. Come back every day!"}),T&&(0,r.jsx)("p",{className:m().errorMessage,children:T}),P&&B&&(0,r.jsxs)("p",{className:m().nextClaimTime,children:["Next claim available at: ",B?B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""]}),(0,r.jsxs)("button",{className:"".concat(m().claimButton," ").concat(P?m().disabledButton:""),onClick:W,disabled:p||P,children:[p?"Claiming...":P?"Already Claimed Today":"Claim 10 Coins",(0,r.jsx)(c.Wp,{className:m().buttonIcon})]})]}),(0,r.jsxs)("div",{className:m().rewardCard,children:[(0,r.jsxs)("div",{className:m().rewardHeader,children:[(0,r.jsx)(c.w_X,{className:m().rewardIcon}),(0,r.jsx)("h2",{className:m().rewardTitle,children:"Time Rewards"})]}),(0,r.jsx)("p",{className:m().rewardDescription,children:"Get 5 coin for each minute you spend on our site. Claim anytime!"}),k&&(0,r.jsx)("p",{className:m().errorMessage,children:k}),(0,r.jsxs)("div",{className:m().progressContainer,children:[(0,r.jsx)("div",{className:m().progressBar,style:{width:"".concat(F.progress,"%")}}),(0,r.jsxs)("span",{className:m().progressText,children:[Z(F.sessionTimeToday%60)," / ",Z(60)]})]}),(0,r.jsxs)("p",{className:m().coinsAvailable,children:[(0,r.jsx)(c.cEG,{className:m().smallCoinIcon}),(0,r.jsxs)("span",{children:[F.coinsAvailable," coins available to claim"]})]}),(0,r.jsxs)("button",{className:"".concat(m().activityButton," ").concat(F.canClaimReward?"":m().disabledButton),onClick:Y,disabled:y||!F.canClaimReward,children:[y?"Claiming...":F.canClaimReward?"Claim ".concat(F.coinsAvailable," Coin").concat(1!==F.coinsAvailable?"s":""):"Keep browsing for coins",(0,r.jsx)(c.w_X,{className:m().buttonIcon})]})]}),(0,r.jsxs)("div",{className:m().rewardCard,children:[(0,r.jsxs)("div",{className:m().rewardHeader,children:[(0,r.jsx)(c.Tpg,{className:m().rewardIcon}),(0,r.jsx)("h2",{className:m().rewardTitle,children:"Watch Ad"})]}),(0,r.jsx)("p",{className:m().rewardDescription,children:"Watch an ad to earn 10 coins instantly!"}),(0,r.jsxs)("button",{className:"".concat(m().claimButton," ").concat(j?m().disabledButton:""),onClick:async()=>{try{f(!0),C(""),window.open("https://www.profitableratecpm.com/tv0ps1rfet?key=a753be44cf1e6c5a853397fa67fe886c","_blank");let e=await (0,h.jv)();e&&"number"==typeof e.coins&&(A("Successfully earned 10 coins from watching ad!"),a(e.coins),b(!0),setTimeout(()=>{b(!1)},1e4))}catch(e){console.error("Error claiming ad reward:",e),C(e.message||"Failed to claim ad reward. Please try again."),"AD_COOLDOWN"===e.code&&(b(!0),setTimeout(()=>{b(!1)},1e4))}finally{f(!1)}},disabled:x||j,children:[x?"Processing...":j?"Wait 10s before next ad":"Watch Ad for 10 Coins",(0,r.jsx)(c.gSK,{className:m().buttonIcon})]})]})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[6671,6711,6874,9349,6068,8441,1684,7358],()=>a(18976)),_N_E=e.O()}]);