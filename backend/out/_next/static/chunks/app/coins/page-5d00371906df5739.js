(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{572:e=>{e.exports={container:"coins_container__jPQNN",header:"coins_header__vO_Zr",backButton:"coins_backButton__hPpE_",title:"coins_title__3Ydob",loading:"coins_loading__w4HnG",error:"coins_error__SQE3E",success:"coins_success__drL8N",coinsBalance:"coins_coinsBalance__tZC2g",coinIcon:"coins_coinIcon__Midci",coinCount:"coins_coinCount__5CvjD",coinLabel:"coins_coinLabel__x6MZA",actionsContainer:"coins_actionsContainer__1ojFE",rewardCard:"coins_rewardCard__BNoxo",rewardHeader:"coins_rewardHeader__JpLt1",rewardIcon:"coins_rewardIcon__eexhp",rewardTitle:"coins_rewardTitle__YF_aA",rewardDescription:"coins_rewardDescription__Wbox8",errorMessage:"coins_errorMessage__C0bxo",nextClaimTime:"coins_nextClaimTime__pj_uH",claimButton:"coins_claimButton__P4qzt",adButton:"coins_adButton__jyLsU",buttonIcon:"coins_buttonIcon__xAC40",progressContainer:"coins_progressContainer__YhGzB",progressBar:"coins_progressBar__izLn7",progressText:"coins_progressText__X6Vws",activityButton:"coins_activityButton__J8HWP",coinsAvailable:"coins_coinsAvailable__o2LPY",smallCoinIcon:"coins_smallCoinIcon__ZiZHt"}},18976:(e,t,r)=>{Promise.resolve().then(r.bind(r,87895))},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},51879:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(95155),o=r(12115);let n=()=>((0,o.useEffect)(()=>{let e=document.createElement("script");e.type="text/javascript",e.src="https://highperformanceformat.com/7e8ec1de91b1d000fc448ad0674d6d34/invoke.js";let t=document.createElement("script");t.type="text/javascript",t.innerHTML="\n      atOptions = {\n        'key' : '7e8ec1de91b1d000fc448ad0674d6d34',\n        'format' : 'iframe',\n        'height' : 90,\n        'width' : 728,\n        'params' : {}\n      };\n    ";let r=document.getElementById("ad-container");r.appendChild(t),r.appendChild(e)},[]),(0,a.jsx)("div",{id:"ad-container",style:{textAlign:"center",margin:"20px 0"}}))},53116:(e,t,r)=>{"use strict";r.d(t,{$P:()=>n,PZ:()=>u,Yv:()=>l,getUserCoins:()=>o,jv:()=>d,lD:()=>s,wA:()=>c,z$:()=>i});var a=r(72047);let o=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{if(!e.ok)throw Error("Failed to get coin balance");return e.json()})}catch(e){throw console.error("Error getting user coins:",e),e}},n=async e=>{try{let t=localStorage.getItem("token");if(!t)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/update-session"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({sessionDuration:e})}).then(e=>{if(!e.ok)throw Error("Failed to update session time");return e.json()})}catch(e){throw console.error("Error updating session time:",e),e}},s=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/session-status"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{if(!e.ok)throw Error("Failed to get session status");return e.json()})}catch(e){throw console.error("Error getting session status:",e),e}},i=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/activity-reward"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.ok?e.json():e.json().then(e=>{throw Error(e.message||"Failed to claim activity reward")}))}catch(e){throw console.error("Error claiming activity reward coins:",e),e}},c=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/daily"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.ok?e.json():e.json().then(e=>{throw Error(e.message||"Failed to claim daily coins")}))}catch(e){throw console.error("Error claiming daily coins:",e),e}},l=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/daily-status"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{if(!e.ok)throw Error("Failed to check daily coins status");return e.json()})}catch(e){throw console.error("Error checking daily coins status:",e),e}},d=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Authentication required");return await fetch("".concat("https://ebookaura.onrender.com/api","/coins/ad-reward"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({adUrl:"https://www.profitableratecpm.com/tv0ps1rfet?key=a753be44cf1e6c5a853397fa67fe886c"})}).then(e=>{if(!e.ok)throw Error("Failed to claim ad reward coins");return e.json()})}catch(e){throw console.error("Error claiming ad reward coins:",e),e}},u=async e=>{try{let t=localStorage.getItem("token");if(!t)throw Error("Authentication required");return await (0,a.dw)("/users/check-purchase/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})}catch(e){throw console.error("Error checking book purchase:",e),e}}},74436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var a=r(12115),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=a.createContext&&a.createContext(o),s=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var a,o,n;a=e,o=t,n=r[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(o))in a?Object.defineProperty(a,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>a.createElement(u,i({attr:l({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,l({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:o,size:n,title:c}=e,d=function(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,d,{className:r,style:l(l({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&a.createElement("title",null,c),e.children)};return void 0!==n?a.createElement(n.Consumer,null,e=>t(e)):t(o)}},87895:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(95155),o=r(12115),n=r(35695),s=r(6874),i=r.n(s),c=r(29911),l=r(56068),d=r(572),u=r.n(d),h=r(53116),m=r(51879);function p(){let{user:e,updateUserCoins:t}=(0,l.h)(),r=(0,n.useRouter)(),[s,d]=(0,o.useState)(!0),[p,w]=(0,o.useState)(!1),[f,y]=(0,o.useState)(!1),[g,_]=(0,o.useState)(!1),[b,v]=(0,o.useState)(!1),[j,x]=(0,o.useState)(""),[C,E]=(0,o.useState)(""),[N,k]=(0,o.useState)(""),[A,T]=(0,o.useState)(""),[O,S]=(0,o.useState)(null),[P,B]=(0,o.useState)(!1),[I,D]=(0,o.useState)(!1),[R,z]=(0,o.useState)({sessionTimeToday:0,requiredTime:60,hasClaimedReward:!1,progress:0,canClaimReward:!1,nextRewardTime:null,minutesAccumulated:0,coinsAvailable:0}),[q,F]=(0,o.useState)(null);(0,o.useEffect)(()=>(!P&&e?(M(),B(!0),L()):e||r.push("/login"),()=>{q&&clearInterval(q)}),[e,r,P]);let L=()=>{H(),F(setInterval(()=>{(0,h.$P)(30).then(e=>{z(t=>({...t,sessionTimeToday:e.sessionTimeToday,canClaimReward:e.canClaimReward,progress:Math.floor(e.sessionTimeToday%60/60*100),minutesAccumulated:e.minutesAccumulated||0,coinsAvailable:5*(e.minutesAccumulated||0)}))}).catch(e=>console.error("Error updating session time:",e))},3e4))},H=async()=>{try{let e=await (0,h.lD)();e&&z({sessionTimeToday:e.sessionTimeToday||0,requiredTime:e.requiredTime||60,hasClaimedReward:!1,progress:e.progress||0,canClaimReward:e.canClaimReward||!1,nextRewardTime:null,minutesAccumulated:e.minutesAccumulated||0,coinsAvailable:e.coinsAvailable||0})}catch(e){console.error("Error fetching session status:",e)}},M=async()=>{d(!0),x("");try{let r=await (0,h.getUserCoins)();r&&"number"==typeof r.coins&&t(r.coins);let a=await (0,h.Yv)();if(a&&(D(a.hasClaimed),a.hasClaimed&&a.nextRewardTime?S(new Date(a.nextRewardTime)):S(null)),await H(),e.nextAdAvailable&&new Date<new Date(e.nextAdAvailable)){v(!0);let t=new Date(e.nextAdAvailable)-new Date;setTimeout(()=>{v(!1)},Math.min(t,1e4))}}catch(e){console.error("Error fetching coins data:",e),x(e.message||"Failed to fetch coins data")}finally{d(!1)}},W=async()=>{w(!0),k(""),E("");try{let e=await (0,h.wA)();if(e&&"number"==typeof e.coins){t(e.coins),E("Successfully claimed ".concat(e.coinsAdded," daily coins!")),D(!0);let r=new Date;r.setHours(24,0,0,0),S(r)}}catch(e){console.error("Error claiming daily coins:",e),k(e.message||"Failed to claim daily coins"),e.response&&e.response.data&&e.response.data.nextReward&&(S(new Date(e.response.data.nextReward)),D(!0))}finally{w(!1)}};return s?(0,a.jsxs)("div",{className:u().container,children:[(0,a.jsxs)("div",{className:u().header,children:[(0,a.jsx)(i(),{href:"/",className:u().backButton,children:(0,a.jsx)(c.QVr,{})}),(0,a.jsx)("h1",{className:u().title,children:"My Coins"})]}),(0,a.jsx)("div",{className:u().loading,children:"Loading coins data..."})]}):(0,a.jsxs)("div",{className:u().container,children:[(0,a.jsx)(m.A,{}),(0,a.jsxs)("div",{className:u().header,children:[(0,a.jsx)(i(),{href:"/",className:u().backButton,children:(0,a.jsx)(c.QVr,{})}),(0,a.jsx)("h1",{className:u().title,children:"My Coins"})]}),j&&(0,a.jsx)("div",{className:u().error,children:j}),C&&(0,a.jsx)("div",{className:u().success,children:C}),(0,a.jsxs)("div",{className:u().coinsBalance,children:[(0,a.jsx)(c.cEG,{className:u().coinIcon}),(0,a.jsx)("span",{className:u().coinCount,children:(null==e?void 0:e.coins)||0}),(0,a.jsx)("span",{className:u().coinLabel,children:"coins"})]}),(0,a.jsxs)("div",{className:u().actionsContainer,children:[(0,a.jsxs)("div",{className:u().rewardCard,children:[(0,a.jsxs)("div",{className:u().rewardHeader,children:[(0,a.jsx)(c.itz,{className:u().rewardIcon}),(0,a.jsx)("h2",{className:u().rewardTitle,children:"Daily Reward"})]}),(0,a.jsx)("p",{className:u().rewardDescription,children:"Claim your daily reward of 10 coins. Come back every day!"}),N&&(0,a.jsx)("p",{className:u().errorMessage,children:N}),I&&O&&(0,a.jsxs)("p",{className:u().nextClaimTime,children:["Next claim available at: ",O?O.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""]}),(0,a.jsxs)("button",{className:"".concat(u().claimButton," ").concat(I?u().disabledButton:""),onClick:W,disabled:p||I,children:[p?"Claiming...":I?"Already Claimed Today":"Claim 10 Coins",(0,a.jsx)(c.Wp,{className:u().buttonIcon})]})]}),(0,a.jsxs)("div",{className:u().rewardCard,children:[(0,a.jsxs)("div",{className:u().rewardHeader,children:[(0,a.jsx)(c.Tpg,{className:u().rewardIcon}),(0,a.jsx)("h2",{className:u().rewardTitle,children:"Watch Ad"})]}),(0,a.jsx)("p",{className:u().rewardDescription,children:"Watch an ad to earn 10 coins instantly!"}),(0,a.jsxs)("button",{className:"".concat(u().claimButton," ").concat(b?u().disabledButton:""),onClick:async()=>{try{_(!0),x(""),window.open("https://www.profitableratecpm.com/tv0ps1rfet?key=a753be44cf1e6c5a853397fa67fe886c","_blank");let e=await (0,h.jv)();e&&"number"==typeof e.coins&&(E("Successfully earned 10 coins from watching ad!"),t(e.coins),v(!0),setTimeout(()=>{v(!1)},1e4))}catch(e){console.error("Error claiming ad reward:",e),x(e.message||"Failed to claim ad reward. Please try again."),"AD_COOLDOWN"===e.code&&(v(!0),setTimeout(()=>{v(!1)},1e4))}finally{_(!1)}},disabled:g||b,children:[g?"Processing...":b?"Wait 10s before next ad":"Watch Ad for 10 Coins",(0,a.jsx)(c.gSK,{className:u().buttonIcon})]})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6671,6711,6874,6068,8441,1684,7358],()=>t(18976)),_N_E=e.O()}]);