(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8871],{8890:e=>{e.exports={progressContainer:"ProgressBar_progressContainer__MgeA_",statusText:"ProgressBar_statusText__Wmtrr",progressBarOuter:"ProgressBar_progressBarOuter__TJ5h7",progressBarInner:"ProgressBar_progressBarInner__L7gtB",progressBarIndeterminate:"ProgressBar_progressBarIndeterminate__0nnL6",progressIndeterminate:"ProgressBar_progressIndeterminate__vWqBq",percentage:"ProgressBar_percentage___XPGw",completed:"ProgressBar_completed__0Vwpp",pulseGreen:"ProgressBar_pulseGreen__cfo5J",error:"ProgressBar_error__n8Zat",pulseRed:"ProgressBar_pulseRed__jD_ZI"}},17203:(e,t,r)=>{"use strict";r.d(t,{JR:()=>a,Sn:()=>o}),r(72047);let a="https://ebookaura.onrender.com/api",o={AUTH:{LOGIN:"".concat(a,"/auth/login"),REGISTER:"".concat(a,"/auth/register"),ME:"".concat(a,"/auth/me"),FORGOT_PASSWORD:"".concat(a,"/auth/forgot-password"),RESET_PASSWORD:e=>"".concat(a,"/auth/reset-password/").concat(e),VERIFY_EMAIL:"".concat(a,"/auth/verify-email")},BOOKS:{ALL:"".concat(a,"/books"),CATEGORIES:"".concat(a,"/books/categories"),TAGS:"".concat(a,"/books/tags"),DETAILS:e=>"".concat(a,"/books/").concat(e),PDF:e=>"".concat(a,"/books/").concat(e,"/pdf"),PDF_CONTENT:e=>"".concat(a,"/books/").concat(e,"/pdf-content"),DOWNLOAD:e=>"".concat(a,"/books/").concat(e,"/download"),REVIEWS:e=>"".concat(a,"/books/").concat(e,"/reviews"),RATING:e=>"".concat(a,"/books/").concat(e,"/rating"),ADD_REVIEW:e=>"".concat(a,"/books/").concat(e,"/reviews")},UPLOAD:{FILE:"".concat(a,"/upload"),PDF:"".concat(a,"/upload/pdf"),DELETE_FILE:e=>"".concat(a,"/upload/").concat(e),DELETE_BOOK:e=>"".concat(a,"/upload/book/").concat(e)},USER:{PROFILE:"".concat(a,"/users/profile"),UPDATE_PROFILE:"".concat(a,"/users/profile"),UPDATE_IMAGE:"".concat(a,"/users/profile/image"),BOOKMARKS:"".concat(a,"/users/bookmarks")}}},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},48584:e=>{e.exports={alert:"Alert_alert__UIPUf",slideIn:"Alert_slideIn__lj2f5",content:"Alert_content__1povL",message:"Alert_message__URkUw",icon:"Alert_icon__AH4eb",closeButton:"Alert_closeButton__EONpg",success:"Alert_success__fxFuP",error:"Alert_error__UjuyX",warning:"Alert_warning__JuHtR",info:"Alert_info__0pSvo",fixed:"Alert_fixed__6naps"}},50929:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r(95155),o=r(72047),n=r(12115),s=r(35695),i=r(6874),l=r.n(i),c=r(29911),u=r(56068),p=r(53716),d=r.n(p),m=r(17203),g=r(8890),h=r.n(g);function f(e){let{progress:t=0,status:r="Uploading...",showPercentage:o=!0,className:s=""}=e,[i,l]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let e=setTimeout(()=>{l(t)},50);return()=>clearTimeout(e)},[t]),(0,a.jsxs)("div",{className:"".concat(h().progressContainer," ").concat(s),children:[(0,a.jsx)("div",{className:h().statusText,children:r}),(0,a.jsx)("div",{className:h().progressBarOuter,children:(0,a.jsx)("div",{className:h().progressBarInner,style:{width:"".concat(i,"%")},"aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100",role:"progressbar"})}),o&&(0,a.jsxs)("div",{className:h().percentage,children:[Math.round(t),"%"]})]})}var _=r(48584),x=r.n(_);function y(e){let{type:t="info",message:r,show:o=!1,onClose:s,autoCloseTime:i=5e3,className:l=""}=e,[u,p]=(0,n.useState)(o);return((0,n.useEffect)(()=>{let e;return p(o),o&&i>0&&(e=setTimeout(()=>{p(!1),s&&s()},i)),()=>{e&&clearTimeout(e)}},[o,i,s]),u)?(0,a.jsxs)("div",{className:"".concat(x().alert," ").concat(x()[t]," ").concat(l," ").concat(x().slideIn),role:"alert",children:[(0,a.jsxs)("div",{className:x().content,children:[(()=>{switch(t){case"success":return(0,a.jsx)(c.A7C,{className:x().icon});case"error":case"warning":return(0,a.jsx)(c.BS8,{className:x().icon});default:return(0,a.jsx)(c.__w,{className:x().icon})}})(),(0,a.jsx)("p",{className:x().message,children:r})]}),(0,a.jsx)("button",{onClick:()=>{p(!1),s&&s()},className:x().closeButton,"aria-label":"Close alert",children:(0,a.jsx)(c.QCr,{})})]}):null}let v=["Contemporary Fiction","Literary Fiction","Historical Fiction","Science Fiction","Fantasy","Mystery","Thriller","Horror","Romance","Western","Crime Fiction","Adventure","Military Fiction","Urban Fiction","Short Stories","Young Adult Fiction","Children's Fiction","Classic Literature","Mythology","Folk Tales","Biography","Autobiography","Memoir","History","Military History","World History","Ancient History","Modern History","Philosophy","Psychology","Self-Help","Personal Development","Business","Economics","Finance","Management","Leadership","Marketing","Entrepreneurship","Career Development","Science","Popular Science","Physics","Chemistry","Biology","Mathematics","Computer Science","Programming","Artificial Intelligence","Technology","Engineering","Environmental Science","Astronomy","Medicine","Healthcare","Neuroscience","Data Science","Robotics","Biotechnology","Information Technology","Art","Art History","Photography","Music","Film Studies","Theater","Dance","Architecture","Design","Fashion","Creative Arts","Literary Criticism","Poetry","Drama","Essays","Journalism","Language","Linguistics","Cultural Studies","Religious Studies","Sociology","Anthropology","Political Science","International Relations","Law","Criminal Justice","Education","Teaching","Social Work","Gender Studies","Environmental Studies","Urban Studies","Geography","Archaeology","Communication Studies","Media Studies","Public Policy","Human Rights","Social Justice","Ethics","Cooking","Food & Wine","Health & Fitness","Sports","Travel","Gardening","Home Improvement","Crafts","Games","Pets","Parenting","Relationships","Lifestyle","Self-Care","Mindfulness","Meditation","Yoga","Alternative Medicine","Nutrition","Wellness"].sort(),b=["Adventure","Romance","Mystery","Thriller","Fantasy","Science Fiction","Horror","Historical","Contemporary","Literary Fiction","Young Adult","Children","Biography","Autobiography","Memoir","Self-Help","Business","Finance","Psychology","Philosophy","Religion","Science","Technology","Computer Science","Programming","Mathematics","Physics","Chemistry","Biology","Medicine","Health","Fitness","Cooking","Food","Travel","Photography","Art","Music","Film","Theater","Poetry","Education","Reference","Language","Politics","Social Science","Economics","Law","Environment","Nature","Sports"].sort();function j(){let{user:e,getToken:t}=(0,u.h)(),r=(0,s.useRouter)(),[i,p]=(0,n.useState)(null),[g,h]=(0,n.useState)(null),[_,x]=(0,n.useState)("No PDF selected"),[j,S]=(0,n.useState)("No cover image selected"),[I,N]=(0,n.useState)(""),[P,C]=(0,n.useState)(""),[w,E]=(0,n.useState)(""),[k,T]=(0,n.useState)(""),[F,A]=(0,n.useState)(""),[R,B]=(0,n.useState)(""),[L,D]=(0,n.useState)(!1),[O,U]=(0,n.useState)(""),[M,G]=(0,n.useState)(""),[z,H]=(0,n.useState)(null),[W,q]=(0,n.useState)(!0),[J,K]=(0,n.useState)(!1),[V,Y]=(0,n.useState)(""),[X,Q]=(0,n.useState)(0),[Z,$]=(0,n.useState)(0),[ee,et]=(0,n.useState)(0),[er,ea]=(0,n.useState)([]),[eo,en]=(0,n.useState)(""),[es,ei]=(0,n.useState)(!1),[el,ec]=(0,n.useState)([]),eu=(0,n.useRef)(null),[ep,ed]=(0,n.useState)(""),[em,eg]=(0,n.useState)(!1),[eh,ef]=(0,n.useState)([]),e_=(0,n.useRef)(null),[ex,ey]=(0,n.useState)(0),[ev,eb]=(0,n.useState)(!1),[ej,eS]=(0,n.useState)("Preparing upload..."),[eI,eN]=(0,n.useState)({show:!1,type:"info",message:""}),[eP,eC]=(0,n.useState)(""),[ew,eE]=(0,n.useState)(!1),[ek,eT]=(0,n.useState)("");(0,n.useEffect)(()=>{if(!e)return void r.push("/login");eF()},[e,r]);let eF=async()=>{q(!0),U("");try{let e=t();if(!e)throw Error("No authentication token found");let a=await (0,o.dw)("/users/profile",{headers:{Authorization:"Bearer ".concat(e)}});H(a),a.isAdmin||r.push("/profile")}catch(e){console.error("Error fetching profile data:",e),U(e.message||"An error occurred while fetching your profile")}finally{q(!1)}},eA=e=>new Promise((t,r)=>{let a=new Image;a.onload=()=>{URL.revokeObjectURL(a.src);let e=a.width,r=a.height;500===e&&700===r?t({valid:!0,width:e,height:r,message:"Image dimensions are correct: ".concat(e,"x").concat(r," pixels")}):t({valid:!1,width:e,height:r,message:"Image must be exactly 500x700 pixels, but got ".concat(e,"x").concat(r," pixels")})},a.onerror=()=>{URL.revokeObjectURL(a.src),r(Error("Failed to load the image. Please try another file."))},a.src=URL.createObjectURL(e)}),eR=e=>{K(e),e?(p(null),x("No PDF selected"),O&&O.includes("PDF file")&&U("")):(Y(""),eC(""),O&&O.includes("URL")&&U(""))},eB=async e=>{let t=e.target.files[0];if(t){if(!t.type.startsWith("image/")){U("Please select an image file for the cover"),h(null),S("No cover image selected");return}if(t.size>1048576){U("Cover image size should be less than 1MB"),h(null),S("No cover image selected");return}try{let e=await eA(t);e.valid?(h(t),S("".concat(t.name," (").concat(e.width,"x").concat(e.height,"px)")),U("")):(U(e.message),h(null),S("No cover image selected"))}catch(e){U(e.message),h(null),S("No cover image selected")}}},eL=()=>{if(!I.trim())return U("Title is required"),!1;if(I.length>100)return U("Title must be under 100 characters"),!1;if(!P.trim())return U("Author is required"),!1;if(P.length>100)return U("Author name must be under 100 characters"),!1;if(!w.trim())return U("Description is required"),!1;if(w.length>200)return U("Description must be under 200 characters"),!1;if(!k||isNaN(k)||k<=0)return U("Please enter a valid number of pages"),!1;if(!F)return U("Please select a category"),!1;if(ew){if(!ek)return U("Price is required for premium PDFs"),!1;let e=parseInt(ek,10);if(isNaN(e)||e<0)return U("Price must be a valid number greater than or equal to 0"),!1}if(J){if(!V.trim())return U("Please enter a valid PDF URL"),!1;try{new URL(V)}catch(e){return U("Please enter a valid URL format"),!1}if(!eP||isNaN(eP)||0>=parseFloat(eP))return U("Please enter a valid file size for the PDF (greater than 0 MB)"),!1}else{if(!i)return U("Please select a PDF file to upload"),!1;if(i.size>0x12c00000)return U("PDF file size should be less than 300MB"),!1}return g?!(g.size>5242880)||(U("Cover image size should be less than 5MB"),!1):(U("Please select a cover image"),!1)};(0,n.useEffect)(()=>{eo?(ec(b.filter(e=>e.toLowerCase().includes(eo.toLowerCase())&&!er.includes(e))),ei(!0)):ei(!1)},[eo,er]),(0,n.useEffect)(()=>{function e(e){eu.current&&!eu.current.contains(e.target)&&ei(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let eD=e=>{if(er.length>=10)return void U("Maximum 10 tags allowed");er.includes(e)||ea([...er,e]),en(""),ei(!1)},eO=()=>{let e=eo.trim();if(er.length>=10)return void U("Maximum 10 tags allowed");e&&!er.includes(e)&&(ea([...er,e]),en(""))},eU=e=>{ea(er.filter(t=>t!==e))};(0,n.useEffect)(()=>{ep?(ef(v.filter(e=>e.toLowerCase().includes(ep.toLowerCase())&&e!==F)),eg(!0)):eg(!1)},[ep,F]),(0,n.useEffect)(()=>{function e(e){e_.current&&!e_.current.contains(e.target)&&eg(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let eM=e=>{A(e),ed(""),eg(!1)},eG=()=>{let e=ep.trim();e&&(A(e),ed(""),eg(!1))},ez=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";eN({show:!0,type:t,message:e})},eH=async e=>{if(e.preventDefault(),!eL())return void window.scrollTo(0,0);eb(!0),ey(0),eS("Preparing files..."),U(""),G("");try{let e=t();if(!e)throw Error("No authentication token found");let r=new FormData;J?(r.append("isCustomUrl","true"),r.append("customURLPDF",V.trim()),r.append("fileSizeMB",eP),eS("Processing PDF URL...")):(eS("Uploading PDF file..."),i&&r.append("pdf",i)),ey(10),setTimeout(()=>{ey(30),J?eS("Validating PDF URL..."):eS("Processing PDF file...")},800),setTimeout(()=>{ey(50),eS("Uploading cover image...")},1500),g&&r.append("coverImage",g),r.append("title",I.trim()),r.append("author",P.trim()),r.append("description",w.trim()),k&&r.append("pageSize",k),F&&r.append("category",F),r.append("isPremium",ew),ew&&r.append("price",ek),er.length>0?r.append("tags",er.join(",")):r.append("tags",""),setTimeout(()=>{ey(70),eS("Finalizing upload...")},2e3);let a=await fetch("".concat(m.JR,"/upload/pdf"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:r});if(!a.ok){let e=a.headers.get("content-type"),t="Failed to upload e-book";throw t=e&&e.includes("application/json")?(await a.json()).message||"Upload failed: ".concat(a.status):"Upload failed: ".concat(a.statusText||a.status),Error(t)}await a.json(),ey(100),eS("Upload complete!"),ez("E-book successfully uploaded!","success"),p(null),h(null),x("No PDF selected"),S("No cover image selected"),N(""),C(""),E(""),T(""),A(""),ed(""),ea([]),en(""),Q(0),$(0),et(0),K(!1),Y(""),eC(""),eE(!1),eT(""),G("E-book successfully uploaded!"),setTimeout(()=>{eb(!1),ey(0)},2e3)}catch(t){console.error("Error uploading e-book:",t),ey(100),eS("Upload failed"),eb(!1);let e=t.message||"An error occurred while uploading the e-book";"AbortError"===t.name?e="Upload timed out. Please try a smaller file or check your internet connection.":e.includes("NetworkError")||e.includes("network")?e="Network error. Please check your internet connection and try again.":e.includes("timeout")||e.includes("Timeout")?e="Upload timed out. Please try a smaller file or check your internet connection.":(e.includes("Invalid image")||e.includes("format"))&&(e="There was an issue with the file format. Please ensure your PDF and image are valid."),ez(e,"error"),U(e)}},eW=(e,t)=>{let r=e/t*100;return r>=100?"".concat(d().charCount," ").concat(d().charCountError):r>=80?"".concat(d().charCount," ").concat(d().charCountWarning):d().charCount},eq=(e,t)=>e?!1===t?"".concat(d().fileInputContainer," ").concat(d().error):!0===t?"".concat(d().fileInputContainer," ").concat(d().success):d().fileInputContainer:d().fileInputContainer;return W?(0,a.jsx)("div",{className:d().container,style:{marginTop:"20px"},children:(0,a.jsx)("div",{className:d().profileContainer,children:(0,a.jsx)("div",{className:d().loading,children:(0,a.jsx)("div",{className:d().loadingAnimation})})})}):e&&(!e||e.isAdmin||!z||z.isAdmin)?(0,a.jsx)("div",{className:d().container,style:{marginTop:"20px"},children:(0,a.jsxs)("div",{className:d().profileContainer,children:[(0,a.jsxs)("div",{className:d().header,children:[(0,a.jsxs)(l(),{href:"/profile",className:d().backLink,children:[(0,a.jsx)(c.QVr,{className:d().backIcon}),"Back to Profile"]}),(0,a.jsxs)("h1",{className:d().headerTitle,style:{marginTop:"40px"},children:[(0,a.jsx)(c.hko,{style:{marginRight:"12px",display:"inline"}}),"Upload Book"]}),(0,a.jsx)("p",{className:d().headerSubtitle,style:{marginTop:"10px"},children:"Fill out the form below to add a new book to the library"})]}),eI.show&&(0,a.jsx)(y,{type:eI.type,message:eI.message,show:eI.show,onClose:()=>{eN(e=>({...e,show:!1}))},autoCloseTime:5e3,className:d().notificationAlert}),O&&!eI.show&&(0,a.jsxs)("div",{className:d().errorMessage,children:[(0,a.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(c.__w,{style:{marginRight:"10px"}}),O]}),(0,a.jsx)("button",{onClick:()=>U(""),className:d().closeErrorButton,"aria-label":"Close error message",children:(0,a.jsx)(c.QCr,{})})]}),M&&!eI.show&&(0,a.jsxs)("div",{className:d().successMessage,children:[(0,a.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(c.CMH,{style:{marginRight:"10px"}}),M]}),(0,a.jsx)("button",{onClick:()=>G(""),className:d().closeSuccessButton,"aria-label":"Close success message",children:(0,a.jsx)(c.QCr,{})})]}),ev&&(0,a.jsx)(f,{progress:ex,status:ej,showPercentage:!0,className:100===ex?d().completed:""}),(0,a.jsxs)("form",{onSubmit:eH,className:d().uploadForm,children:[(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsxs)("label",{htmlFor:"title",children:[(0,a.jsx)(c.vd0,{style:{marginRight:"8px"}}),"Title ",(0,a.jsxs)("span",{className:eW(X,100),children:[X,"/100"]})]}),(0,a.jsx)("input",{type:"text",id:"title",value:I,onChange:e=>{let t=e.target.value;N(t),Q(t.length),t.length>100?U("Title must be under 100 characters"):U("")},maxLength:100,placeholder:"Enter book title",className:d().textInput})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsxs)("label",{htmlFor:"author",children:[(0,a.jsx)(c.x$1,{style:{marginRight:"8px"}}),"Author ",(0,a.jsxs)("span",{className:eW(Z,100),children:[Z,"/100"]})]}),(0,a.jsx)("input",{type:"text",id:"author",value:P,onChange:e=>{let t=e.target.value;C(t),$(t.length),t.length>100?U("Author name must be under 100 characters"):U("")},maxLength:100,placeholder:"Enter author name",className:d().textInput})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsxs)("label",{htmlFor:"description",children:[(0,a.jsx)(c.__w,{style:{marginRight:"8px"}}),"Description ",(0,a.jsxs)("span",{className:eW(ee,1e3),children:[ee,"/1000"]})]}),(0,a.jsx)("textarea",{id:"description",value:w,onChange:e=>{let t=e.target.value;E(t),et(t.length),t.length>1e3?U("Description must be under 1000 characters"):U("")},maxLength:1e3,placeholder:"Enter a description (up to 1000 characters)",className:d().textArea,rows:5})]}),(0,a.jsxs)("div",{className:d().formRow,children:[(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsxs)("label",{htmlFor:"pageSize",children:[(0,a.jsx)(c.aQJ,{style:{marginRight:"8px"}}),"Number of Pages"]}),(0,a.jsx)("input",{type:"number",id:"pageSize",value:k,onChange:e=>T(e.target.value),min:"1",placeholder:"Enter page count",className:d().numberInput})]}),(0,a.jsxs)("div",{className:d().formGroup,ref:e_,children:[(0,a.jsxs)("label",{htmlFor:"category",children:[(0,a.jsx)(c.hko,{style:{marginRight:"8px"}}),"Category"]}),(0,a.jsxs)("div",{className:d().categoryInputContainer,children:[F&&(0,a.jsxs)("div",{className:d().selectedCategory,children:[(0,a.jsx)("span",{children:F}),(0,a.jsx)("button",{type:"button",onClick:()=>A(""),className:d().removeCategory,children:(0,a.jsx)(c.QCr,{})})]}),!F&&(0,a.jsxs)("div",{className:d().categoryInputWrapper,children:[(0,a.jsx)("input",{type:"text",value:ep,onChange:e=>ed(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eh.length>0?eM(eh[0]):ep.trim()&&eG())},placeholder:"Search or add category...",className:d().categoryInput}),ep&&(0,a.jsx)("button",{type:"button",onClick:eG,className:d().addCategoryButton,children:(0,a.jsx)(c.OiG,{})})]}),em&&eh.length>0&&(0,a.jsx)("div",{className:d().categorySuggestions,children:eh.map(e=>(0,a.jsx)("div",{onClick:()=>eM(e),className:d().categorySuggestion,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:d().formGroup,ref:eu,children:[(0,a.jsxs)("label",{htmlFor:"tags",children:[(0,a.jsx)(c.amN,{style:{marginRight:"8px"}}),"Tags ",(0,a.jsx)("span",{className:d().tagLimitInfo,children:"(min 1, max 10)"}),(0,a.jsxs)("span",{className:er.length>9?"".concat(d().tagCount," ").concat(d().charCountError):d().tagCount,children:[er.length,"/10"]})]}),(0,a.jsxs)("div",{className:d().tagInputContainer,children:[(0,a.jsx)("div",{className:d().selectedTags,children:er.map(e=>(0,a.jsxs)("span",{className:d().tag,children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>eU(e),className:d().removeTag,children:(0,a.jsx)(c.QCr,{})})]},e))}),(0,a.jsxs)("div",{className:d().tagInputWrapper,children:[(0,a.jsx)("input",{type:"text",value:eo,onChange:e=>en(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),el.length>0?eD(el[0]):eo.trim()&&eO()):"Backspace"===e.key&&!eo&&er.length>0&&eU(er[er.length-1])},placeholder:"Search or add tags...",className:d().tagInput}),eo&&(0,a.jsx)("button",{type:"button",onClick:eO,className:d().addTagButton,children:(0,a.jsx)(c.OiG,{})})]}),es&&el.length>0&&(0,a.jsx)("div",{className:d().tagSuggestions,children:el.map(e=>(0,a.jsx)("div",{onClick:()=>eD(e),className:d().tagSuggestion,children:e},e))})]})]}),(0,a.jsxs)("div",{className:d().pdfInputSection,children:[(0,a.jsxs)("div",{className:d().pdfInputTabs,children:[(0,a.jsxs)("button",{type:"button",className:"".concat(d().pdfInputTab," ").concat(J?"":d().activeTab),onClick:()=>eR(!1),children:[(0,a.jsx)(c.l1U,{className:d().tabIcon}),"Upload PDF File"]}),(0,a.jsxs)("button",{type:"button",className:"".concat(d().pdfInputTab," ").concat(J?d().activeTab:""),onClick:()=>eR(!0),children:[(0,a.jsx)(c.AnD,{className:d().tabIcon}),"Paste PDF URL"]})]}),J?(0,a.jsxs)("div",{className:d().urlInputContainer,children:[(0,a.jsxs)("label",{htmlFor:"pdf-url",className:d().urlInputLabel,children:[(0,a.jsx)(c.AnD,{className:d().urlIcon}),"Enter PDF URL"]}),(0,a.jsx)("input",{type:"url",id:"pdf-url",value:V,onChange:e=>{Y(e.target.value);try{e.target.value&&(new URL(e.target.value),U(""))}catch(e){U("Please enter a valid URL")}},placeholder:"https://example.com/document.pdf",className:d().urlInput}),(0,a.jsxs)("div",{className:d().formGroup,style:{marginTop:"10px"},children:[(0,a.jsxs)("label",{htmlFor:"custom-file-size",className:d().urlInputLabel,children:[(0,a.jsx)(c.l1U,{className:d().urlIcon}),"File Size (MB)"]}),(0,a.jsx)("input",{type:"number",id:"custom-file-size",value:eP,onChange:e=>eC(e.target.value),min:"0.1",step:"0.1",placeholder:"Enter file size in MB",className:d().urlInput})]}),(0,a.jsxs)("p",{className:d().urlInputHelp,children:[(0,a.jsx)(c.__w,{style:{marginRight:"8px"}}),"Enter any URL to a PDF file (Google Drive, Dropbox, GitHub, etc.)"]}),(0,a.jsxs)("div",{className:d().urlExamples,children:[(0,a.jsx)("p",{className:d().urlExampleTitle,children:"Examples of accepted URLs:"}),(0,a.jsxs)("ul",{className:d().urlExampleList,children:[(0,a.jsx)("li",{children:"Google Drive: https://drive.google.com/file/d/..."}),(0,a.jsx)("li",{children:"Dropbox: https://www.dropbox.com/s/..."}),(0,a.jsx)("li",{children:"GitHub: https://github.com/user/repo/raw/branch/file.pdf"}),(0,a.jsx)("li",{children:"Direct links: https://example.com/file.pdf"}),(0,a.jsx)("li",{children:"Any other valid URL that points to a PDF"})]})]})]}):(0,a.jsxs)("div",{className:eq(i,i&&i.size<=0xa00000),children:[(0,a.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>{if(J)return;let t=e.target.files[0];if(t){if("application/pdf"!==t.type){U("Please select a PDF file"),p(null),x("No PDF selected");return}if(t.size>0xa00000){U("PDF file size should be less than 10MB"),p(null),x("No PDF selected");return}p(t),x(t.name),U("")}},id:"pdf-upload",className:d().fileInput}),(0,a.jsxs)("label",{htmlFor:"pdf-upload",className:d().fileInputLabel,children:[(0,a.jsx)(c.l1U,{className:d().uploadIcon}),"Choose PDF (max 10MB)"]}),(0,a.jsx)("span",{className:d().fileName,children:_}),i&&i.size>0&&(0,a.jsxs)("span",{className:d().fileSize,children:[(i.size/1048576).toFixed(2)," MB"]})]})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsxs)("div",{className:d().checkboxContainer,children:[(0,a.jsx)("input",{type:"checkbox",id:"premium-pdf",checked:ew,onChange:e=>eE(e.target.checked),className:d().checkbox}),(0,a.jsx)("label",{htmlFor:"premium-pdf",className:d().checkboxLabel,children:"This is a Premium PDF"})]}),(0,a.jsxs)("p",{className:d().fieldHelp,children:[(0,a.jsx)(c.__w,{style:{marginRight:"8px"}}),"Mark this PDF as premium content that requires coins to access"]})]}),ew&&(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsxs)("label",{htmlFor:"price",className:d().label,children:[(0,a.jsx)(c.cEG,{style:{marginRight:"8px"}}),"Price (in coins)"]}),(0,a.jsx)("input",{type:"number",id:"price",value:ek,onChange:e=>eT(e.target.value),className:d().input,min:"0",required:ew}),(0,a.jsxs)("p",{className:d().fieldHelp,children:[(0,a.jsx)(c.__w,{style:{marginRight:"8px"}}),"Set the price in coins that users need to pay to access this premium content"]})]}),(0,a.jsxs)("div",{className:eq(g,g&&g.size<=1048576),children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:eB,id:"cover-upload",className:d().fileInput}),(0,a.jsxs)("label",{htmlFor:"cover-upload",className:d().fileInputLabel,children:[(0,a.jsx)(c.dkL,{className:d().uploadIcon}),"Choose Cover Image (500x700px, max 1MB)"]}),(0,a.jsx)("span",{className:d().fileName,children:j}),g&&g.size>0&&(0,a.jsxs)("span",{className:d().fileSize,children:[(g.size/1048576).toFixed(2)," MB"]}),(0,a.jsx)("span",{className:d().fileRequirements,children:"Cover image must be exactly 500x700 pixels and less than 1MB"})]}),(0,a.jsx)("button",{type:"submit",className:d().uploadButton,disabled:ev||!i&&(!J||!V),children:ev?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:d().spinner}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.l1U,{className:d().uploadIcon}),"Upload E-Book"]})})]})]})}):null}},52806:(e,t,r)=>{Promise.resolve().then(r.bind(r,50929))},53716:e=>{e.exports={container:"profile_container__CYebx",profileContainer:"profile_profileContainer__4OeWo",header:"profile_header___W3PQ",headerTitle:"profile_headerTitle__WkqHY",headerSubtitle:"profile_headerSubtitle__JOkrx",backLink:"profile_backLink__3pML1",backIcon:"profile_backIcon___GAPa",profileContent:"profile_profileContent__eyz94",avatarSection:"profile_avatarSection__fZnTm",avatar:"profile_avatar__f2UDF",editAvatarButton:"profile_editAvatarButton__OGJpb",editIcon:"profile_editIcon__7Ufqs",infoSection:"profile_infoSection__P_hRi",infoHeader:"profile_infoHeader__ACTom",infoTitle:"profile_infoTitle__hsoqk",editButton:"profile_editButton__oGUfC",infoGrid:"profile_infoGrid__PmkTz",infoItem:"profile_infoItem__FgGdu",infoLabel:"profile_infoLabel__6oEHc",infoValue:"profile_infoValue__RSQP1",bioSection:"profile_bioSection__s4LcX",bioHeader:"profile_bioHeader__9bOZJ",bioTitle:"profile_bioTitle__bTV9Y",bioContent:"profile_bioContent__M_7_O",noBioMessage:"profile_noBioMessage__2bFjw",loading:"profile_loading__P1qhx",loadingAnimation:"profile_loadingAnimation__MyJOS",spin:"profile_spin__B8_d_",errorMessage:"profile_errorMessage__3vub5",shake:"profile_shake__KgFvi",actionButtons:"profile_actionButtons__rDFEg",logoutButton:"profile_logoutButton__Vjcxn",editProfileButton:"profile_editProfileButton__dgAm8",uploadForm:"profile_uploadForm__WDk1V",fadeIn:"profile_fadeIn__vOW1W",formGroup:"profile_formGroup__umLr_",formRow:"profile_formRow__swpY5",textInput:"profile_textInput__XYias",numberInput:"profile_numberInput__5GsXd",textArea:"profile_textArea__UcFai",categoryInput:"profile_categoryInput__c0odF",tagInput:"profile_tagInput__S_aRB",charCount:"profile_charCount__UOhZi",fileInputContainer:"profile_fileInputContainer__QdFRD",fileInput:"profile_fileInput__X2Y3n",fileInputLabel:"profile_fileInputLabel__E_sOg",uploadIcon:"profile_uploadIcon__XYwxx",fileName:"profile_fileName__KU6lp",uploadButton:"profile_uploadButton__Qsq70",successMessage:"profile_successMessage__q9API",slideDown:"profile_slideDown__xNbZ4",tagInputContainer:"profile_tagInputContainer__YsqsA",selectedTags:"profile_selectedTags__iagaH",tag:"profile_tag__hGgEH",removeTag:"profile_removeTag__sheY8",tagInputWrapper:"profile_tagInputWrapper__7v04N",addTagButton:"profile_addTagButton__yisKO",tagSuggestions:"profile_tagSuggestions__IMG8P",tagSuggestion:"profile_tagSuggestion__ImHcn",categoryInputContainer:"profile_categoryInputContainer__qmXMK",selectedCategory:"profile_selectedCategory__wQRhV",removeCategory:"profile_removeCategory__7aYKa",categoryInputWrapper:"profile_categoryInputWrapper__wCYTS",addCategoryButton:"profile_addCategoryButton__DSAU2",categorySuggestions:"profile_categorySuggestions__ZmhOe",categorySuggestion:"profile_categorySuggestion__BK7q_",spinner:"profile_spinner__0gF1W",adminButton:"profile_adminButton__KhZ97",buttonIcon:"profile_buttonIcon__CHlaF",closeErrorButton:"profile_closeErrorButton__AWv_8",closeSuccessButton:"profile_closeSuccessButton__gl9ox",notificationAlert:"profile_notificationAlert__jWune",fadeInDown:"profile_fadeInDown__i3Fng",progressContainer:"profile_progressContainer__07yVO",completed:"profile_completed__FjM8x",statusText:"profile_statusText__6Zsux",tagLimitInfo:"profile_tagLimitInfo__iVqvG",tagCount:"profile_tagCount__j4tJm",fileRequirements:"profile_fileRequirements__fzpa8",error:"profile_error__423wL",success:"profile_success__XRSVu",charCountWarning:"profile_charCountWarning__3m8ec",fileSize:"profile_fileSize__RInI1",charCountError:"profile_charCountError__riiQL",pdfInputSection:"profile_pdfInputSection__PymR3",pdfInputTabs:"profile_pdfInputTabs__ggHZP",pdfInputTab:"profile_pdfInputTab__y7tDy",activeTab:"profile_activeTab__1AMUy",tabIcon:"profile_tabIcon__gnaRN",urlInputContainer:"profile_urlInputContainer__QXGyY",urlInputLabel:"profile_urlInputLabel__33236",urlIcon:"profile_urlIcon__dctPX",urlInput:"profile_urlInput__9_dB7",urlInputHelp:"profile_urlInputHelp__5ofU6",urlExamples:"profile_urlExamples__jCIpR",urlExampleTitle:"profile_urlExampleTitle__Do5d5",urlExampleList:"profile_urlExampleList__p0XwI"}},56068:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>c,h:()=>u});var a=r(95155),o=r(12115),n=r(35695),s=r(72047);let i=(0,o.createContext)(),l=()=>"ak_"+Array.from(crypto.getRandomValues(new Uint8Array(24))).map(e=>e.toString(16).padStart(2,"0")).join(""),c=e=>{let{children:t}=e,[r,c]=(0,o.useState)(null),[u,p]=(0,o.useState)(!0),[d,m]=(0,o.useState)(!1),g=(0,n.useRouter)(),h=(0,o.useRef)(!1),f=(0,o.useRef)(!1);(0,o.useEffect)(()=>{m(!0),(async()=>{try{let e=localStorage.getItem("userInfo"),t=localStorage.getItem("token");if(localStorage.getItem("apiKey"),e&&t)try{if(c(JSON.parse(e)),!h.current&&!f.current){h.current=!0;try{await (0,s.dw)("/auth/check",{headers:{Authorization:"Bearer ".concat(t)}}),f.current=!0}catch(e){if(console.error("Token validation failed:",e),"localhost"!==window.location.hostname)try{console.log("Retrying token validation..."),await new Promise(e=>setTimeout(e,1e3)),await (0,s.dw)("/auth/check",{headers:{Authorization:"Bearer ".concat(t)}}),f.current=!0}catch(e){console.error("Token validation retry failed:",e),x()}else x()}finally{h.current=!1}}}catch(e){console.error("Failed to parse user info:",e),localStorage.removeItem("userInfo"),localStorage.removeItem("token"),localStorage.removeItem("apiKey")}}finally{p(!1)}})()},[]);let _=e=>{if(console.log("Processing login data"),!e)return void console.error("No user data received for login");try{if(!e.token)return void console.error("No token in login data");let{token:t,...r}=e;console.log("Setting user data:",r),c(r);{localStorage.setItem("userInfo",JSON.stringify(r)),localStorage.setItem("token",t);let e=localStorage.getItem("apiKey");e||(console.log("Generating new API key"),e=l(),localStorage.setItem("apiKey",e)),console.log("Authentication data stored in localStorage")}}catch(e){console.error("Error processing login:",e)}},x=()=>{c(null),localStorage.removeItem("userInfo"),localStorage.removeItem("token"),g.push("/login")},y=()=>localStorage.getItem("token"),v=()=>localStorage.getItem("apiKey"),b=e=>{if(r){let t={...r,coins:e};c(t),localStorage.setItem("userInfo",JSON.stringify(t))}};return d?(0,a.jsx)(i.Provider,{value:{user:r,isLoggedIn:!!r,loading:u,login:_,logout:x,getToken:y,getApiKey:v,updateUserCoins:b},children:t}):(0,a.jsx)(i.Provider,{value:{user:null,isLoggedIn:!1,loading:!0,login:_,logout:x,getToken:y,getApiKey:v,updateUserCoins:b},children:t})},u=()=>{let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},72047:(e,t,r)=>{"use strict";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e.startsWith("http")?e:"".concat("https://ebookaura.onrender.com/api").concat(e);console.log("API Request: ".concat(t.method||"GET"," ").concat(r)),t.headers||(t.headers={}),!t.body||t.headers["Content-Type"]||t.body instanceof FormData||(t.headers["Content-Type"]="application/json");let a=e.startsWith("/books")&&("GET"===t.method||!t.method)&&!e.includes("/reviews")&&!e.includes("/bookmarks"),o=e.match(/^\/books\/[a-z0-9]+$/i);{let e=localStorage.getItem("token"),r=localStorage.getItem("apiKey");e&&(!a||o)&&!t.headers.Authorization&&(t.headers.Authorization="Bearer ".concat(e)),r&&!t.headers["X-API-Key"]&&(t.headers["X-API-Key"]=r)}let n=await fetch(r,t),s=n.headers.get("content-type");if(!n.ok){if(console.error("API Error (".concat(n.status,"): ").concat(n.statusText)),s&&s.includes("application/json")){let e=await n.json();throw Error(e.message||"API request failed with status ".concat(n.status))}{let e=await n.text();console.error("Non-JSON error response:",e.substring(0,150)+"...");let t="API request failed with status ".concat(n.status);if(e.includes("<title>")&&e.includes("</title>")){let r=e.match(/<title>(.*?)<\/title>/i);r&&r[1]&&(t="Server Error: ".concat(r[1]))}throw Error(t)}}if(s&&s.includes("application/json"))return await n.json();{console.warn("Response is not JSON. Content-Type:",s);let e=await n.text();try{return JSON.parse(e)}catch(e){throw console.error("Failed to parse response as JSON:",e),Error("API response was not valid JSON")}}}catch(e){throw console.error("API request error:",e),e}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(e,{method:"GET",...t})}async function n(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(e,{method:"POST",body:t instanceof FormData?t:JSON.stringify(t),...r})}async function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(e,{method:"PUT",body:JSON.stringify(t),...r})}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(e,{method:"DELETE",...t})}r.d(t,{Xj:()=>n,_5:()=>i,dw:()=>o,q1:()=>s})},74436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>u});var a=r(12115),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=a.createContext&&a.createContext(o),s=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var a,o,n;a=e,o=t,n=r[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(o))in a?Object.defineProperty(a,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>a.createElement(p,i({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function p(e){var t=t=>{var r,{attr:o,size:n,title:l}=e,u=function(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s),p=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),l&&a.createElement("title",null,l),e.children)};return void 0!==n?a.createElement(n.Consumer,null,e=>t(e)):t(o)}}},e=>{var t=t=>e(e.s=t);e.O(0,[3909,6711,6874,8441,1684,7358],()=>t(52806)),_N_E=e.O()}]);