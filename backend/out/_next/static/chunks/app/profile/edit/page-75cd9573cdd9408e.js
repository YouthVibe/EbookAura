(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4029],{31271:(e,a,r)=>{Promise.resolve().then(r.bind(r,68857))},61260:e=>{e.exports={container:"edit_container__tHEsa",formContainer:"edit_formContainer__nUXlN",header:"edit_header__KC1Q4",headerTitle:"edit_headerTitle__3JXz4",headerSubtitle:"edit_headerSubtitle__4L4rw",backLink:"edit_backLink__JBaTR",backIcon:"edit_backIcon__qesfS",form:"edit_form__4ZZSn",formGroup:"edit_formGroup__ruRrO",label:"edit_label__Wai4g",input:"edit_input__IG8lx",textarea:"edit_textarea__tXI0N",helpText:"edit_helpText__yWgMm",buttonContainer:"edit_buttonContainer__u8Yyy",cancelButton:"edit_cancelButton__hmr0k",saveButton:"edit_saveButton__CtYMW",saveIcon:"edit_saveIcon__BKQUB",loading:"edit_loading__4mwlh",loadingAnimation:"edit_loadingAnimation__Y1Uh2",spin:"edit_spin__tKFAb",errorMessage:"edit_errorMessage__Ul8be",successMessage:"edit_successMessage__Jo6Pk"}},68857:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>h});var s=r(95155),t=r(72047),l=r(12115),n=r(35695),i=r(6874),o=r.n(i);r(66766);var c=r(29911),d=r(56068),u=r(61260),m=r.n(u);function h(){let{user:e,login:a,getToken:r}=(0,d.h)(),i=(0,n.useRouter)(),[u,h]=(0,l.useState)(!0),[_,f]=(0,l.useState)(!1),[p,N]=(0,l.useState)(""),[x,b]=(0,l.useState)(""),[g,j]=(0,l.useState)({name:"",fullName:"",bio:""});(0,l.useEffect)(()=>{if(!e&&!u)return void i.push("/login");e&&v()},[e,i]);let v=async()=>{h(!0),N("");try{let e=r();if(!e)throw Error("No authentication token found");let a=await (0,t.dw)("/users/profile",{headers:{Authorization:"Bearer ".concat(e)}});j({name:a.name||"",fullName:a.fullName||"",bio:a.bio||""})}catch(e){console.error("Error fetching profile data:",e),N(e.message||"An error occurred while fetching your profile")}finally{h(!1)}},y=e=>{let{name:a,value:r}=e.target;j(e=>({...e,[a]:r}))},k=async s=>{s.preventDefault(),f(!0),N(""),b("");try{let s=r();if(!s)throw Error("No authentication token found");let l=await (0,t.q1)("/users/profile",g,{headers:{Authorization:"Bearer ".concat(s)}});a({...e,name:l.name,fullName:l.fullName}),b("Profile updated successfully!"),setTimeout(()=>{i.push("/profile")},1500)}catch(e){console.error("Error updating profile:",e),N(e.message||"An error occurred while updating your profile")}finally{f(!1)}};return u?(0,s.jsx)("div",{className:m().container,children:(0,s.jsx)("div",{className:m().formContainer,children:(0,s.jsx)("div",{className:m().loading,children:(0,s.jsx)("div",{className:m().loadingAnimation})})})}):e?(0,s.jsx)("div",{className:m().container,children:(0,s.jsxs)("div",{className:m().formContainer,children:[(0,s.jsxs)("div",{className:m().header,children:[(0,s.jsxs)(o(),{href:"/profile",className:m().backLink,children:[(0,s.jsx)(c.QVr,{className:m().backIcon}),"Back to Profile"]}),(0,s.jsx)("h1",{className:m().headerTitle,children:"Edit Profile"}),(0,s.jsx)("p",{className:m().headerSubtitle,children:"Update your personal information"})]}),p&&(0,s.jsx)("div",{className:m().errorMessage,children:p}),x&&(0,s.jsx)("div",{className:m().successMessage,children:x}),(0,s.jsxs)("form",{onSubmit:k,className:m().form,children:[(0,s.jsxs)("div",{className:m().formGroup,children:[(0,s.jsx)("label",{htmlFor:"name",className:m().label,children:"Username"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:g.name,onChange:y,className:m().input,placeholder:"Enter username",required:!0,minLength:3}),(0,s.jsx)("p",{className:m().helpText,children:"Username must be at least 3 characters."})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[(0,s.jsx)("label",{htmlFor:"fullName",className:m().label,children:"Full Name"}),(0,s.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:g.fullName,onChange:y,className:m().input,placeholder:"Enter your full name",required:!0})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[(0,s.jsx)("label",{htmlFor:"bio",className:m().label,children:"Bio"}),(0,s.jsx)("textarea",{id:"bio",name:"bio",value:g.bio,onChange:y,className:m().textarea,placeholder:"Write something about yourself",rows:5}),(0,s.jsx)("p",{className:m().helpText,children:"Tell us a bit about yourself, your interests, and your reading preferences."})]}),(0,s.jsxs)("div",{className:m().buttonContainer,children:[(0,s.jsx)(o(),{href:"/profile",className:m().cancelButton,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:m().saveButton,disabled:_,children:_?"Saving...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.dIn,{className:m().saveIcon}),"Save Changes"]})})]})]})]})}):null}}},e=>{var a=a=>e(e.s=a);e.O(0,[199,6711,6874,7733,6068,8441,1684,7358],()=>a(31271)),_N_E=e.O()}]);